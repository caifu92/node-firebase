(function() {
  // TODO(jwenger): Make sure this file is copy-pastable and add docs on how to update this file
  var firebase = require('../default-namespace');
  var h,n=this;function p(a){return void 0!==a}function aa(){}function ba(a){a.Ub=function(){return a.Ze?a.Ze:a.Ze=new a}}
function ca(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function da(a){return"array"==ca(a)}function ea(a){var b=ca(a);return"array"==b||"object"==b&&"number"==typeof a.length}function q(a){return"string"==typeof a}function fa(a){return"number"==typeof a}function t(a){return"function"==ca(a)}function ga(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function ha(a,b,c){return a.call.apply(a.bind,arguments)}
function ia(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function u(a,b,c){u=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ha:ia;return u.apply(null,arguments)}
function ja(a,b){function c(){}c.prototype=b.prototype;a.Lg=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Fg=function(a,c,f){for(var g=Array(arguments.length-2),k=2;k<arguments.length;k++)g[k-2]=arguments[k];return b.prototype[c].apply(a,g)}};function ka(){this.Xa=-1};function la(){this.Xa=-1;this.Xa=64;this.N=[];this.Sd=[];this.If=[];this.xd=[];this.xd[0]=128;for(var a=1;a<this.Xa;++a)this.xd[a]=0;this.Md=this.Zb=0;this.reset()}ja(la,ka);la.prototype.reset=function(){this.N[0]=1732584193;this.N[1]=4023233417;this.N[2]=2562383102;this.N[3]=271733878;this.N[4]=3285377520;this.Md=this.Zb=0};
function ma(a,b,c){c||(c=0);var d=a.If;if(q(b))for(var e=0;16>e;e++)d[e]=b.charCodeAt(c)<<24|b.charCodeAt(c+1)<<16|b.charCodeAt(c+2)<<8|b.charCodeAt(c+3),c+=4;else for(e=0;16>e;e++)d[e]=b[c]<<24|b[c+1]<<16|b[c+2]<<8|b[c+3],c+=4;for(e=16;80>e;e++){var f=d[e-3]^d[e-8]^d[e-14]^d[e-16];d[e]=(f<<1|f>>>31)&4294967295}b=a.N[0];c=a.N[1];for(var g=a.N[2],k=a.N[3],m=a.N[4],l,e=0;80>e;e++)40>e?20>e?(f=k^c&(g^k),l=1518500249):(f=c^g^k,l=1859775393):60>e?(f=c&g|k&(c|g),l=2400959708):(f=c^g^k,l=3395469782),f=(b<<
5|b>>>27)+f+m+l+d[e]&4294967295,m=k,k=g,g=(c<<30|c>>>2)&4294967295,c=b,b=f;a.N[0]=a.N[0]+b&4294967295;a.N[1]=a.N[1]+c&4294967295;a.N[2]=a.N[2]+g&4294967295;a.N[3]=a.N[3]+k&4294967295;a.N[4]=a.N[4]+m&4294967295}
la.prototype.update=function(a,b){if(null!=a){p(b)||(b=a.length);for(var c=b-this.Xa,d=0,e=this.Sd,f=this.Zb;d<b;){if(0==f)for(;d<=c;)ma(this,a,d),d+=this.Xa;if(q(a))for(;d<b;){if(e[f]=a.charCodeAt(d),++f,++d,f==this.Xa){ma(this,e);f=0;break}}else for(;d<b;)if(e[f]=a[d],++f,++d,f==this.Xa){ma(this,e);f=0;break}}this.Zb=f;this.Md+=b}};function na(a){if(Error.captureStackTrace)Error.captureStackTrace(this,na);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}ja(na,Error);na.prototype.name="CustomError";function oa(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a);}function pa(){this.Dd=void 0}
function qa(a,b,c){switch(typeof b){case "string":ra(b,c);break;case "number":c.push(isFinite(b)&&!isNaN(b)?b:"null");break;case "boolean":c.push(b);break;case "undefined":c.push("null");break;case "object":if(null==b){c.push("null");break}if(da(b)){var d=b.length;c.push("[");for(var e="",f=0;f<d;f++)c.push(e),e=b[f],qa(a,a.Dd?a.Dd.call(b,String(f),e):e,c),e=",";c.push("]");break}c.push("{");d="";for(f in b)Object.prototype.hasOwnProperty.call(b,f)&&(e=b[f],"function"!=typeof e&&(c.push(d),ra(f,c),
c.push(":"),qa(a,a.Dd?a.Dd.call(b,f,e):e,c),d=","));c.push("}");break;case "function":break;default:throw Error("Unknown type: "+typeof b);}}var sa={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"},ta=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;
function ra(a,b){b.push('"',a.replace(ta,function(a){if(a in sa)return sa[a];var b=a.charCodeAt(0),e="\\u";16>b?e+="000":256>b?e+="00":4096>b&&(e+="0");return sa[a]=e+b.toString(16)}),'"')};function v(a,b){for(var c in a)b.call(void 0,a[c],c,a)}function ua(a,b){var c={},d;for(d in a)c[d]=b.call(void 0,a[d],d,a);return c}function va(a,b){for(var c in a)if(!b.call(void 0,a[c],c,a))return!1;return!0}function wa(a){var b=0,c;for(c in a)b++;return b}function xa(a){for(var b in a)return b}function ya(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function za(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function Aa(a,b){for(var c in a)if(a[c]==b)return!0;return!1}
function Ba(a,b,c){for(var d in a)if(b.call(c,a[d],d,a))return d}function Ca(a,b){var c=Ba(a,b,void 0);return c&&a[c]}function Da(a){for(var b in a)return!1;return!0}function Ea(a){var b={},c;for(c in a)b[c]=a[c];return b};var w=Array.prototype,Fa=w.indexOf?function(a,b,c){return w.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(q(a))return q(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Ga=w.forEach?function(a,b,c){w.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=q(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Ha=w.filter?function(a,b,c){return w.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,g=q(a)?
a.split(""):a,k=0;k<d;k++)if(k in g){var m=g[k];b.call(c,m,k,a)&&(e[f++]=m)}return e},Ia=w.map?function(a,b,c){return w.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=q(a)?a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e},Ja=w.reduce?function(a,b,c,d){for(var e=[],f=1,g=arguments.length;f<g;f++)e.push(arguments[f]);d&&(e[0]=u(b,d));return w.reduce.apply(a,e)}:function(a,b,c,d){var e=c;Ga(a,function(c,g){e=b.call(d,e,c,g,a)});return e},Ka=w.every?function(a,b,
c){return w.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=q(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&!b.call(c,e[f],f,a))return!1;return!0};function La(a,b){var c=Ma(a,b,void 0);return 0>c?null:q(a)?a.charAt(c):a[c]}function Ma(a,b,c){for(var d=a.length,e=q(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return f;return-1}function Na(a,b){var c=Fa(a,b);0<=c&&w.splice.call(a,c,1)}function Oa(a,b){a.sort(b||Pa)}function Pa(a,b){return a>b?1:a<b?-1:0};var y;a:{var Qa=n.navigator;if(Qa){var Ra=Qa.userAgent;if(Ra){y=Ra;break a}}y=""};function Sa(a){n.setTimeout(function(){throw a;},0)}var Ta;
function Ua(){var a=n.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&-1==y.indexOf("Presto")&&(a=function(){var a=document.createElement("iframe");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=u(function(a){if(("*"==d||a.origin==
d)&&a.data==c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&-1==y.indexOf("Trident")&&-1==y.indexOf("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(p(c.next)){c=c.next;var a=c.Je;c.Je=null;a()}};return function(a){d.next={Je:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("script")?function(a){var b=
document.createElement("script");b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){n.setTimeout(a,0)}};function Va(a,b){Wa||Xa();Ya||(Wa(),Ya=!0);Za.push(new $a(a,b))}var Wa;function Xa(){if(n.Promise&&n.Promise.resolve){var a=n.Promise.resolve();Wa=function(){a.then(ab)}}else Wa=function(){var a=ab;!t(n.setImmediate)||n.Window&&n.Window.prototype&&n.Window.prototype.setImmediate==n.setImmediate?(Ta||(Ta=Ua()),Ta(a)):n.setImmediate(a)}}var Ya=!1,Za=[];[].push(function(){Ya=!1;Za=[]});
function ab(){for(;Za.length;){var a=Za;Za=[];for(var b=0;b<a.length;b++){var c=a[b];try{c.Wf.call(c.scope)}catch(d){Sa(d)}}}Ya=!1}function $a(a,b){this.Wf=a;this.scope=b};function bb(a,b){this.L=cb;this.sf=void 0;this.Ca=this.Ga=null;this.fd=this.Zd=!1;if(a==db)eb(this,fb,b);else try{var c=this;a.call(b,function(a){eb(c,fb,a)},function(a){if(!(a instanceof gb))try{if(a instanceof Error)throw a;throw Error("Promise rejected.");}catch(b){}eb(c,hb,a)})}catch(d){eb(this,hb,d)}}var cb=0,fb=2,hb=3;function db(){}bb.prototype.then=function(a,b,c){return ib(this,t(a)?a:null,t(b)?b:null,c)};bb.prototype.then=bb.prototype.then;bb.prototype.$goog_Thenable=!0;h=bb.prototype;
h.Ag=function(a,b){return ib(this,null,a,b)};h.cancel=function(a){this.L==cb&&Va(function(){var b=new gb(a);jb(this,b)},this)};function jb(a,b){if(a.L==cb)if(a.Ga){var c=a.Ga;if(c.Ca){for(var d=0,e=-1,f=0,g;g=c.Ca[f];f++)if(g=g.m)if(d++,g==a&&(e=f),0<=e&&1<d)break;0<=e&&(c.L==cb&&1==d?jb(c,b):(d=c.Ca.splice(e,1)[0],kb(c,d,hb,b)))}a.Ga=null}else eb(a,hb,b)}function lb(a,b){a.Ca&&a.Ca.length||a.L!=fb&&a.L!=hb||mb(a);a.Ca||(a.Ca=[]);a.Ca.push(b)}
function ib(a,b,c,d){var e={m:null,gf:null,jf:null};e.m=new bb(function(a,g){e.gf=b?function(c){try{var e=b.call(d,c);a(e)}catch(l){g(l)}}:a;e.jf=c?function(b){try{var e=c.call(d,b);!p(e)&&b instanceof gb?g(b):a(e)}catch(l){g(l)}}:g});e.m.Ga=a;lb(a,e);return e.m}h.Bf=function(a){this.L=cb;eb(this,fb,a)};h.Cf=function(a){this.L=cb;eb(this,hb,a)};
function eb(a,b,c){if(a.L==cb){if(a==c)b=hb,c=new TypeError("Promise cannot resolve to itself");else{var d;if(c)try{d=!!c.$goog_Thenable}catch(e){d=!1}else d=!1;if(d){a.L=1;c.then(a.Bf,a.Cf,a);return}if(ga(c))try{var f=c.then;if(t(f)){nb(a,c,f);return}}catch(g){b=hb,c=g}}a.sf=c;a.L=b;a.Ga=null;mb(a);b!=hb||c instanceof gb||ob(a,c)}}function nb(a,b,c){function d(b){f||(f=!0,a.Cf(b))}function e(b){f||(f=!0,a.Bf(b))}a.L=1;var f=!1;try{c.call(b,e,d)}catch(g){d(g)}}
function mb(a){a.Zd||(a.Zd=!0,Va(a.Uf,a))}h.Uf=function(){for(;this.Ca&&this.Ca.length;){var a=this.Ca;this.Ca=null;for(var b=0;b<a.length;b++)kb(this,a[b],this.L,this.sf)}this.Zd=!1};function kb(a,b,c,d){if(c==fb)b.gf(d);else{if(b.m)for(;a&&a.fd;a=a.Ga)a.fd=!1;b.jf(d)}}function ob(a,b){a.fd=!0;Va(function(){a.fd&&pb.call(null,b)})}var pb=Sa;function gb(a){na.call(this,a)}ja(gb,na);gb.prototype.name="cancel";var qb=-1!=y.indexOf("Opera")||-1!=y.indexOf("OPR"),rb=-1!=y.indexOf("Trident")||-1!=y.indexOf("MSIE"),sb=-1!=y.indexOf("Gecko")&&-1==y.toLowerCase().indexOf("webkit")&&!(-1!=y.indexOf("Trident")||-1!=y.indexOf("MSIE")),tb=-1!=y.toLowerCase().indexOf("webkit");
(function(){var a="",b;if(qb&&n.opera)return a=n.opera.version,t(a)?a():a;sb?b=/rv\:([^\);]+)(\)|;)/:rb?b=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:tb&&(b=/WebKit\/(\S+)/);b&&(a=(a=b.exec(y))?a[1]:"");return rb&&(b=(b=n.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a})();var ub=null,vb=null;
function wb(a,b){if(!ea(a))throw Error("encodeByteArray takes an array as a parameter");if(!ub){ub={};vb={};for(var c=0;65>c;c++)ub[c]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c),vb[c]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(c)}for(var c=b?vb:ub,d=[],e=0;e<a.length;e+=3){var f=a[e],g=e+1<a.length,k=g?a[e+1]:0,m=e+2<a.length,l=m?a[e+2]:0,r=f>>2,f=(f&3)<<4|k>>4,k=(k&15)<<2|l>>6,l=l&63;m||(l=64,g||(k=64));d.push(c[r],c[f],c[k],c[l])}return d.join("")}
;function xb(a,b){if(!a)throw yb(b);}function yb(a){return Error("Firebase Database ("+firebase.SDK_VERSION+") INTERNAL ASSERT FAILED: "+a)};function zb(a){return"undefined"!==typeof JSON&&p(JSON.parse)?JSON.parse(a):oa(a)}function z(a){if("undefined"!==typeof JSON&&p(JSON.stringify))a=JSON.stringify(a);else{var b=[];qa(new pa,a,b);a=b.join("")}return a};function Ab(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function A(a,b){if(Object.prototype.hasOwnProperty.call(a,b))return a[b]}function Bb(a,b){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b(c,a[c])};var Cb=n.Promise||bb;bb.prototype["catch"]=bb.prototype.Ag;function Db(){var a=this;this.reject=this.resolve=null;this.sa=new Cb(function(b,c){a.resolve=b;a.reject=c})}function Eb(a,b){return function(c,d){c?a.reject(c):a.resolve(d);t(b)&&(Fb(a.sa),1===b.length?b(c):b(c,d))}}function Fb(a){a.then(void 0,aa)};function Gb(a){for(var b=[],c=0,d=0;d<a.length;d++){var e=a.charCodeAt(d);55296<=e&&56319>=e&&(e-=55296,d++,xb(d<a.length,"Surrogate pair missing trail surrogate."),e=65536+(e<<10)+(a.charCodeAt(d)-56320));128>e?b[c++]=e:(2048>e?b[c++]=e>>6|192:(65536>e?b[c++]=e>>12|224:(b[c++]=e>>18|240,b[c++]=e>>12&63|128),b[c++]=e>>6&63|128),b[c++]=e&63|128)}return b}function Hb(a){for(var b=0,c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b++:2048>d?b+=2:55296<=d&&56319>=d?(b+=4,c++):b+=3}return b};function Ib(a){var b=[];Bb(a,function(a,d){da(d)?Ga(d,function(d){b.push(encodeURIComponent(a)+"="+encodeURIComponent(d))}):b.push(encodeURIComponent(a)+"="+encodeURIComponent(d))});return b.length?"&"+b.join("&"):""};function B(a,b,c,d){var e;d<b?e="at least "+b:d>c&&(e=0===c?"none":"no more than "+c);if(e)throw Error(a+" failed: Was called with "+d+(1===d?" argument.":" arguments.")+" Expects "+e+".");}function Jb(a,b,c){var d="";switch(b){case 1:d=c?"first":"First";break;case 2:d=c?"second":"Second";break;case 3:d=c?"third":"Third";break;case 4:d=c?"fourth":"Fourth";break;default:throw Error("errorPrefix called with argumentNumber > 4.  Need to update it?");}return a=a+" failed: "+(d+" argument ")}
function C(a,b,c,d){if((!d||p(c))&&!t(c))throw Error(Jb(a,b,d)+"must be a valid function.");}function Kb(a,b,c){if(p(c)&&(!ga(c)||null===c))throw Error(Jb(a,b,!0)+"must be a valid context object.");};function Lb(a,b){this.committed=a;this.snapshot=b};function Mb(a){this.Fe=a}Mb.prototype.getToken=function(a){return this.Fe.INTERNAL.getToken(a).then(null,function(a){return a&&"auth/token-not-initialized"===a.code?(Nb("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(a)})};function Ob(a,b){a.Fe.INTERNAL.addAuthTokenListener(b)};function Pb(a,b){this.type=Qb;this.source=a;this.path=b}Pb.prototype.Kc=function(){return this.path.e()?new Pb(this.source,D):new Pb(this.source,E(this.path))};Pb.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" listen_complete)"};function Rb(a,b,c){this.type=Sb;this.source=a;this.path=b;this.Ia=c}Rb.prototype.Kc=function(a){return this.path.e()?new Rb(this.source,D,this.Ia.R(a)):new Rb(this.source,E(this.path),this.Ia)};Rb.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" overwrite: "+this.Ia.toString()+")"};function Tb(a,b){return Ub(a.name,b.name)}function Vb(a,b){return Ub(a,b)};function F(a,b){this.name=a;this.S=b}function Wb(a,b){return new F(a,b)};function Xb(){this.Hd=H}Xb.prototype.j=function(a){return this.Hd.Q(a)};Xb.prototype.toString=function(){return this.Hd.toString()};function Yb(){this.rc={}}function Zb(a,b,c){p(c)||(c=1);Ab(a.rc,b)||(a.rc[b]=0);a.rc[b]+=c}Yb.prototype.get=function(){return Ea(this.rc)};function $b(a){this.Mf=a;this.od=null}$b.prototype.get=function(){var a=this.Mf.get(),b=Ea(a);if(this.od)for(var c in this.od)b[c]-=this.od[c];this.od=a;return b};function ac(a,b){this.yf={};this.Sc=new $b(a);this.wa=b;var c=1E4+2E4*Math.random();setTimeout(u(this.pf,this),Math.floor(c))}ac.prototype.pf=function(){var a=this.Sc.get(),b={},c=!1,d;for(d in a)0<a[d]&&Ab(this.yf,d)&&(b[d]=a[d],c=!0);c&&this.wa.we(b);setTimeout(u(this.pf,this),Math.floor(6E5*Math.random()))};var bc={},cc={};function dc(a){a=a.toString();bc[a]||(bc[a]=new Yb);return bc[a]}function ec(a,b){var c=a.toString();cc[c]||(cc[c]=b());return cc[c]};function fc(a){this.sc=a;this.Ad="firebase:"}h=fc.prototype;h.set=function(a,b){null==b?this.sc.removeItem(this.Ad+a):this.sc.setItem(this.Ad+a,z(b))};h.get=function(a){a=this.sc.getItem(this.Ad+a);return null==a?null:zb(a)};h.remove=function(a){this.sc.removeItem(this.Ad+a)};h.$e=!1;h.toString=function(){return this.sc.toString()};function gc(){this.nc={}}gc.prototype.set=function(a,b){null==b?delete this.nc[a]:this.nc[a]=b};gc.prototype.get=function(a){return Ab(this.nc,a)?this.nc[a]:null};gc.prototype.remove=function(a){delete this.nc[a]};gc.prototype.$e=!0;function hc(a){try{if("undefined"!==typeof window&&"undefined"!==typeof window[a]){var b=window[a];b.setItem("firebase:sentinel","cache");b.removeItem("firebase:sentinel");return new fc(b)}}catch(c){}return new gc}var ic=hc("localStorage"),jc=hc("sessionStorage");function kc(a,b,c,d,e){this.host=a.toLowerCase();this.domain=this.host.substr(this.host.indexOf(".")+1);this.Pc=b;this.ne=c;this.Dg=d;this.lf=e||"";this.ab=ic.get("host:"+a)||this.host}function lc(a,b){b!==a.ab&&(a.ab=b,"s-"===a.ab.substr(0,2)&&ic.set("host:"+a.host,a.ab))}
function mc(a,b,c){I("string"===typeof b,"typeof type must == string");I("object"===typeof c,"typeof params must == object");if(b===nc)b=(a.Pc?"wss://":"ws://")+a.ab+"/.ws?";else if(b===oc)b=(a.Pc?"https://":"http://")+a.ab+"/.lp?";else throw Error("Unknown connection type: "+b);a.host!==a.ab&&(c.ns=a.ne);var d=[];v(c,function(a,b){d.push(b+"="+a)});return b+d.join("&")}kc.prototype.toString=function(){var a=(this.Pc?"https://":"http://")+this.host;this.lf&&(a+="<"+this.lf+">");return a};(function(){var a=process.version;if("v0.10.22"===a||"v0.10.23"===a||"v0.10.24"===a){var b=function(a,b,c){this.chunk=a;this.encoding=b;this.callback=c},c=function(a,c,d,e,l){c.objectMode||!1===c.decodeStrings||"string"!==typeof d||(d=new Buffer(d,e));Buffer.isBuffer(d)&&(e="buffer");var r=c.objectMode?1:d.length;c.length+=r;var x=c.length<c.highWaterMark;x||(c.needDrain=!0);c.writing?c.buffer.push(new b(d,e,l)):(c.writelen=r,c.writecb=l,c.writing=!0,c.sync=!0,a._write(d,e,c.onwrite),c.sync=!1);return x},
d=function(a,b,c,d){var e=!0;if(!Buffer.isBuffer(c)&&"string"!==typeof c&&null!==c&&void 0!==c&&!b.objectMode){var r=new TypeError("Invalid non-string/buffer chunk");a.emit("error",r);process.nextTick(function(){d(r)});e=!1}return e},e=function(a,b){var c=Error("write after end");a.emit("error",c);process.nextTick(function(){b(c)})},a=require("_stream_writable");a.prototype.write=function(a,b,k){var m=this._writableState,l=!1;"function"===typeof b&&(k=b,b=null);Buffer.isBuffer(a)?b="buffer":b||(b=
m.defaultEncoding);"function"!==typeof k&&(k=function(){});m.ended?e(this,k):d(this,m,a,k)&&(l=c(this,m,a,b,k));return l};require("_stream_duplex").prototype.write=a.prototype.write}})();function pc(a,b){return a&&"object"===typeof a?(I(".sv"in a,"Unexpected leaf node or priority contents"),b[a[".sv"]]):a}function qc(a,b){var c=new rc;sc(a,new J(""),function(a,e){tc(c,a,uc(e,b))});return c}function uc(a,b){var c=a.C().H(),c=pc(c,b),d;if(a.J()){var e=pc(a.Ea(),b);return e!==a.Ea()||c!==a.C().H()?new vc(e,K(c)):a}d=a;c!==a.C().H()&&(d=d.ga(new vc(c)));a.P(L,function(a,c){var e=uc(c,b);e!==c&&(d=d.U(a,e))});return d};function wc(a,b){this.Na=a;this.ca=b?b:xc}h=wc.prototype;h.Qa=function(a,b){return new wc(this.Na,this.ca.Qa(a,b,this.Na).Y(null,null,!1,null,null))};h.remove=function(a){return new wc(this.Na,this.ca.remove(a,this.Na).Y(null,null,!1,null,null))};h.get=function(a){for(var b,c=this.ca;!c.e();){b=this.Na(a,c.key);if(0===b)return c.value;0>b?c=c.left:0<b&&(c=c.right)}return null};
function yc(a,b){for(var c,d=a.ca,e=null;!d.e();){c=a.Na(b,d.key);if(0===c){if(d.left.e())return e?e.key:null;for(d=d.left;!d.right.e();)d=d.right;return d.key}0>c?d=d.left:0<c&&(e=d,d=d.right)}throw Error("Attempted to find predecessor key for a nonexistent key.  What gives?");}h.e=function(){return this.ca.e()};h.count=function(){return this.ca.count()};h.Ec=function(){return this.ca.Ec()};h.dc=function(){return this.ca.dc()};h.ia=function(a){return this.ca.ia(a)};
h.Vb=function(a){return new zc(this.ca,null,this.Na,!1,a)};h.Wb=function(a,b){return new zc(this.ca,a,this.Na,!1,b)};h.Yb=function(a,b){return new zc(this.ca,a,this.Na,!0,b)};h.Xe=function(a){return new zc(this.ca,null,this.Na,!0,a)};function zc(a,b,c,d,e){this.Fd=e||null;this.ie=d;this.Ra=[];for(e=1;!a.e();)if(e=b?c(a.key,b):1,d&&(e*=-1),0>e)a=this.ie?a.left:a.right;else if(0===e){this.Ra.push(a);break}else this.Ra.push(a),a=this.ie?a.right:a.left}
function M(a){if(0===a.Ra.length)return null;var b=a.Ra.pop(),c;c=a.Fd?a.Fd(b.key,b.value):{key:b.key,value:b.value};if(a.ie)for(b=b.left;!b.e();)a.Ra.push(b),b=b.right;else for(b=b.right;!b.e();)a.Ra.push(b),b=b.left;return c}function Ac(a){if(0===a.Ra.length)return null;var b;b=a.Ra;b=b[b.length-1];return a.Fd?a.Fd(b.key,b.value):{key:b.key,value:b.value}}function Bc(a,b,c,d,e){this.key=a;this.value=b;this.color=null!=c?c:!0;this.left=null!=d?d:xc;this.right=null!=e?e:xc}h=Bc.prototype;
h.Y=function(a,b,c,d,e){return new Bc(null!=a?a:this.key,null!=b?b:this.value,null!=c?c:this.color,null!=d?d:this.left,null!=e?e:this.right)};h.count=function(){return this.left.count()+1+this.right.count()};h.e=function(){return!1};h.ia=function(a){return this.left.ia(a)||a(this.key,this.value)||this.right.ia(a)};function Cc(a){return a.left.e()?a:Cc(a.left)}h.Ec=function(){return Cc(this).key};h.dc=function(){return this.right.e()?this.key:this.right.dc()};
h.Qa=function(a,b,c){var d,e;e=this;d=c(a,e.key);e=0>d?e.Y(null,null,null,e.left.Qa(a,b,c),null):0===d?e.Y(null,b,null,null,null):e.Y(null,null,null,null,e.right.Qa(a,b,c));return Dc(e)};function Ec(a){if(a.left.e())return xc;a.left.fa()||a.left.left.fa()||(a=Fc(a));a=a.Y(null,null,null,Ec(a.left),null);return Dc(a)}
h.remove=function(a,b){var c,d;c=this;if(0>b(a,c.key))c.left.e()||c.left.fa()||c.left.left.fa()||(c=Fc(c)),c=c.Y(null,null,null,c.left.remove(a,b),null);else{c.left.fa()&&(c=Gc(c));c.right.e()||c.right.fa()||c.right.left.fa()||(c=Hc(c),c.left.left.fa()&&(c=Gc(c),c=Hc(c)));if(0===b(a,c.key)){if(c.right.e())return xc;d=Cc(c.right);c=c.Y(d.key,d.value,null,null,Ec(c.right))}c=c.Y(null,null,null,null,c.right.remove(a,b))}return Dc(c)};h.fa=function(){return this.color};
function Dc(a){a.right.fa()&&!a.left.fa()&&(a=Ic(a));a.left.fa()&&a.left.left.fa()&&(a=Gc(a));a.left.fa()&&a.right.fa()&&(a=Hc(a));return a}function Fc(a){a=Hc(a);a.right.left.fa()&&(a=a.Y(null,null,null,null,Gc(a.right)),a=Ic(a),a=Hc(a));return a}function Ic(a){return a.right.Y(null,null,a.color,a.Y(null,null,!0,null,a.right.left),null)}function Gc(a){return a.left.Y(null,null,a.color,null,a.Y(null,null,!0,a.left.right,null))}
function Hc(a){return a.Y(null,null,!a.color,a.left.Y(null,null,!a.left.color,null,null),a.right.Y(null,null,!a.right.color,null,null))}function Jc(){}h=Jc.prototype;h.Y=function(){return this};h.Qa=function(a,b){return new Bc(a,b,null)};h.remove=function(){return this};h.count=function(){return 0};h.e=function(){return!0};h.ia=function(){return!1};h.Ec=function(){return null};h.dc=function(){return null};h.fa=function(){return!1};var xc=new Jc;var Kc=function(){var a=1;return function(){return a++}}(),I=xb,Lc=yb;function Mc(a){try{return(new Buffer(a,"base64")).toString("utf8")}catch(b){Nb("base64Decode failed: ",b)}return null}function Nc(a){var b=Gb(a);a=new la;a.update(b);var b=[],c=8*a.Md;56>a.Zb?a.update(a.xd,56-a.Zb):a.update(a.xd,a.Xa-(a.Zb-56));for(var d=a.Xa-1;56<=d;d--)a.Sd[d]=c&255,c/=256;ma(a,a.Sd);for(d=c=0;5>d;d++)for(var e=24;0<=e;e-=8)b[c]=a.N[d]>>e&255,++c;return wb(b)}
function Oc(a){for(var b="",c=0;c<arguments.length;c++)b=ea(arguments[c])?b+Oc.apply(null,arguments[c]):"object"===typeof arguments[c]?b+z(arguments[c]):b+arguments[c],b+=" ";return b}var Pc=null,Qc=!0;
function Rc(a,b){xb(!b||!0===a||!1===a,"Can't turn on custom loggers persistently.");!0===a?("undefined"!==typeof console&&("function"===typeof console.log?Pc=u(console.log,console):"object"===typeof console.log&&(Pc=function(a){console.log(a)})),b&&jc.set("logging_enabled",!0)):t(a)?Pc=a:(Pc=null,jc.remove("logging_enabled"))}function Nb(a){!0===Qc&&(Qc=!1,null===Pc&&!0===jc.get("logging_enabled")&&Rc(!0));if(Pc){var b=Oc.apply(null,arguments);Pc(b)}}
function Sc(a){return function(){Nb(a,arguments)}}function Tc(a){if("undefined"!==typeof console){var b="FIREBASE INTERNAL ERROR: "+Oc.apply(null,arguments);"undefined"!==typeof console.error?console.error(b):console.log(b)}}function Uc(a){var b=Oc.apply(null,arguments);throw Error("FIREBASE FATAL ERROR: "+b);}function N(a){if("undefined"!==typeof console){var b="FIREBASE WARNING: "+Oc.apply(null,arguments);"undefined"!==typeof console.warn?console.warn(b):console.log(b)}}
function Vc(a){var b,c,d,e,f,g=a;f=c=a=b="";d=!0;e="https";if(q(g)){var k=g.indexOf("//");0<=k&&(e=g.substring(0,k-1),g=g.substring(k+2));k=g.indexOf("/");-1===k&&(k=g.length);b=g.substring(0,k);f="";g=g.substring(k).split("/");for(k=0;k<g.length;k++)if(0<g[k].length){var m=g[k];try{m=decodeURIComponent(m.replace(/\+/g," "))}catch(l){}f+="/"+m}g=b.split(".");3===g.length?(a=g[1],c=g[0].toLowerCase()):2===g.length&&(a=g[0]);k=b.indexOf(":");0<=k&&(d="https"===e||"wss"===e)}"firebase"===a&&Uc(b+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead");
c&&"undefined"!=c||Uc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com");d||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&N("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");return{hc:new kc(b,d,c,"ws"===e||"wss"===e),path:new J(f)}}function Wc(a){return fa(a)&&(a!=a||a==Number.POSITIVE_INFINITY||a==Number.NEGATIVE_INFINITY)}function Xc(a){a()}
function Ub(a,b){if(a===b)return 0;if("[MIN_NAME]"===a||"[MAX_NAME]"===b)return-1;if("[MIN_NAME]"===b||"[MAX_NAME]"===a)return 1;var c=Yc(a),d=Yc(b);return null!==c?null!==d?0==c-d?a.length-b.length:c-d:-1:null!==d?1:a<b?-1:1}function Zc(a,b){if(b&&a in b)return b[a];throw Error("Missing required key ("+a+") in object: "+z(b));}
function $c(a){if("object"!==typeof a||null===a)return z(a);var b=[],c;for(c in a)b.push(c);b.sort();c="{";for(var d=0;d<b.length;d++)0!==d&&(c+=","),c+=z(b[d]),c+=":",c+=$c(a[b[d]]);return c+"}"}function ad(a,b){if(a.length<=b)return[a];for(var c=[],d=0;d<a.length;d+=b)d+b>a?c.push(a.substring(d,a.length)):c.push(a.substring(d,d+b));return c}function bd(a,b){if(da(a))for(var c=0;c<a.length;++c)b(c,a[c]);else v(a,b)}
function cd(a){I(!Wc(a),"Invalid JSON number");var b,c,d,e;0===a?(d=c=0,b=-Infinity===1/a?1:0):(b=0>a,a=Math.abs(a),a>=Math.pow(2,-1022)?(d=Math.min(Math.floor(Math.log(a)/Math.LN2),1023),c=d+1023,d=Math.round(a*Math.pow(2,52-d)-Math.pow(2,52))):(c=0,d=Math.round(a/Math.pow(2,-1074))));e=[];for(a=52;a;--a)e.push(d%2?1:0),d=Math.floor(d/2);for(a=11;a;--a)e.push(c%2?1:0),c=Math.floor(c/2);e.push(b?1:0);e.reverse();b=e.join("");c="";for(a=0;64>a;a+=8)d=parseInt(b.substr(a,8),2).toString(16),1===d.length&&
(d="0"+d),c+=d;return c.toLowerCase()}var dd=/^-?\d{1,10}$/;function Yc(a){return dd.test(a)&&(a=Number(a),-2147483648<=a&&2147483647>=a)?a:null}function ed(a){try{a()}catch(b){setTimeout(function(){N("Exception was thrown by user callback.",b.stack||"");throw b;},Math.floor(0))}}function fd(a,b,c){Object.defineProperty(a,b,{get:c})};function gd(a){var b={},c={},d={},e="";try{var f=a.split("."),b=zb(Mc(f[0])||""),c=zb(Mc(f[1])||""),e=f[2],d=c.d||{};delete c.d}catch(g){}return{Ig:b,Ke:c,data:d,xg:e}}function hd(a){a=gd(a);var b=a.Ke;return!!a.xg&&!!b&&"object"===typeof b&&b.hasOwnProperty("iat")}function id(a){a=gd(a).Ke;return"object"===typeof a&&!0===A(a,"admin")};function jd(a,b,c){this.type=kd;this.source=a;this.path=b;this.children=c}jd.prototype.Kc=function(a){if(this.path.e())return a=this.children.subtree(new J(a)),a.e()?null:a.value?new Rb(this.source,D,a.value):new jd(this.source,D,a);I(O(this.path)===a,"Can't get a merge for a child not on the path of the operation");return new jd(this.source,E(this.path),this.children)};jd.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"};function ld(a,b,c){this.f=Sc("p:rest:");this.M=a;this.Fb=b;this.Rd=c;this.aa={}}function md(a,b){if(p(b))return"tag$"+b;I(od(a.n),"should have a tag if it's not a default query.");return a.path.toString()}h=ld.prototype;
h.af=function(a,b,c,d){var e=a.path.toString();this.f("Listen called for "+e+" "+a.ka());var f=md(a,c),g={};this.aa[f]=g;a=pd(a.n);var k=this;qd(this,e+".json",a,function(a,b){var r=b;404===a&&(a=r=null);null===a&&k.Fb(e,r,!1,c);A(k.aa,f)===g&&d(a?401==a?"permission_denied":"rest_error:"+a:"ok",null)})};h.Df=function(a,b){var c=md(a,b);delete this.aa[c]};h.of=function(){};h.pe=function(){};h.ff=function(){};h.vd=function(){};h.put=function(){};h.bf=function(){};h.we=function(){};
function qd(a,b,c,d){c=c||{};c.format="export";a.Rd.getToken(!1).then(function(e){(e=e&&e.accessToken)&&(c.auth=e);var f=(a.M.Pc?"https://":"http://")+a.M.host+b+"?"+Ib(c);a.f("Sending REST request for "+f);var g=new XMLHttpRequest;g.onreadystatechange=function(){if(d&&4===g.readyState){a.f("REST Response for "+f+" received. status:",g.status,"response:",g.responseText);var b=null;if(200<=g.status&&300>g.status){try{b=zb(g.responseText)}catch(c){N("Failed to parse JSON response for "+f+": "+g.responseText)}d(null,
b)}else 401!==g.status&&404!==g.status&&N("Got unsuccessful REST response for "+f+" Status: "+g.status),d(g.status);d=null}};g.open("GET",f,!0);g.send()})};function rd(){}var sd={};function td(a){return u(a.compare,a)}rd.prototype.kd=function(a,b){return 0!==this.compare(new F("[MIN_NAME]",a),new F("[MIN_NAME]",b))};rd.prototype.Fc=function(){return ud};function vd(a){I(!a.e()&&".priority"!==O(a),"Can't create PathIndex with empty path or .priority key");this.ac=a}ja(vd,rd);h=vd.prototype;h.vc=function(a){return!a.Q(this.ac).e()};h.compare=function(a,b){var c=a.S.Q(this.ac),d=b.S.Q(this.ac),c=c.qc(d);return 0===c?Ub(a.name,b.name):c};
h.Cc=function(a,b){var c=K(a),c=H.F(this.ac,c);return new F(b,c)};h.Dc=function(){var a=H.F(this.ac,wd);return new F("[MAX_NAME]",a)};h.toString=function(){return this.ac.slice().join("/")};function xd(){}ja(xd,rd);h=xd.prototype;h.compare=function(a,b){var c=a.S.C(),d=b.S.C(),c=c.qc(d);return 0===c?Ub(a.name,b.name):c};h.vc=function(a){return!a.C().e()};h.kd=function(a,b){return!a.C().$(b.C())};h.Fc=function(){return ud};h.Dc=function(){return new F("[MAX_NAME]",new vc("[PRIORITY-POST]",wd))};
h.Cc=function(a,b){var c=K(a);return new F(b,new vc("[PRIORITY-POST]",c))};h.toString=function(){return".priority"};var L=new xd;function yd(){}ja(yd,rd);h=yd.prototype;h.compare=function(a,b){return Ub(a.name,b.name)};h.vc=function(){throw Lc("KeyIndex.isDefinedOn not expected to be called.");};h.kd=function(){return!1};h.Fc=function(){return ud};h.Dc=function(){return new F("[MAX_NAME]",H)};h.Cc=function(a){I(q(a),"KeyIndex indexValue must always be a string.");return new F(a,H)};h.toString=function(){return".key"};
var zd=new yd;function Ad(){}ja(Ad,rd);h=Ad.prototype;h.compare=function(a,b){var c=a.S.qc(b.S);return 0===c?Ub(a.name,b.name):c};h.vc=function(){return!0};h.kd=function(a,b){return!a.$(b)};h.Fc=function(){return ud};h.Dc=function(){return Bd};h.Cc=function(a,b){var c=K(a);return new F(b,c)};h.toString=function(){return".value"};var Cd=new Ad;function Dd(a,b){this.ld=a;this.bc=b}Dd.prototype.get=function(a){var b=A(this.ld,a);if(!b)throw Error("No index defined for "+a);return b===sd?null:b};function Ed(a,b,c){var d=ua(a.ld,function(d,f){var g=A(a.bc,f);I(g,"Missing index implementation for "+f);if(d===sd){if(g.vc(b.S)){for(var k=[],m=c.Vb(Wb),l=M(m);l;)l.name!=b.name&&k.push(l),l=M(m);k.push(b);return Fd(k,td(g))}return sd}g=c.get(b.name);k=d;g&&(k=k.remove(new F(b.name,g)));return k.Qa(b,b.S)});return new Dd(d,a.bc)}
function Gd(a,b,c){var d=ua(a.ld,function(a){if(a===sd)return a;var d=c.get(b.name);return d?a.remove(new F(b.name,d)):a});return new Dd(d,a.bc)}var Hd=new Dd({".priority":sd},{".priority":L});function vc(a,b){this.B=a;I(p(this.B)&&null!==this.B,"LeafNode shouldn't be created with null/undefined value.");this.ba=b||H;Id(this.ba);this.Cb=null}var Jd=["object","boolean","number","string"];h=vc.prototype;h.J=function(){return!0};h.C=function(){return this.ba};h.ga=function(a){return new vc(this.B,a)};h.R=function(a){return".priority"===a?this.ba:H};h.Q=function(a){return a.e()?this:".priority"===O(a)?this.ba:H};h.Fa=function(){return!1};h.We=function(){return null};
h.U=function(a,b){return".priority"===a?this.ga(b):b.e()&&".priority"!==a?this:H.U(a,b).ga(this.ba)};h.F=function(a,b){var c=O(a);if(null===c)return b;if(b.e()&&".priority"!==c)return this;I(".priority"!==c||1===Kd(a),".priority must be the last token in a path");return this.U(c,H.F(E(a),b))};h.e=function(){return!1};h.Db=function(){return 0};h.P=function(){return!1};h.H=function(a){return a&&!this.C().e()?{".value":this.Ea(),".priority":this.C().H()}:this.Ea()};
h.hash=function(){if(null===this.Cb){var a="";this.ba.e()||(a+="priority:"+Ld(this.ba.H())+":");var b=typeof this.B,a=a+(b+":"),a="number"===b?a+cd(this.B):a+this.B;this.Cb=Nc(a)}return this.Cb};h.Ea=function(){return this.B};h.qc=function(a){if(a===H)return 1;if(a instanceof P)return-1;I(a.J(),"Unknown node type");var b=typeof a.B,c=typeof this.B,d=Fa(Jd,b),e=Fa(Jd,c);I(0<=d,"Unknown leaf type: "+b);I(0<=e,"Unknown leaf type: "+c);return d===e?"object"===c?0:this.B<a.B?-1:this.B===a.B?0:1:e-d};
h.mb=function(){return this};h.wc=function(){return!0};h.$=function(a){return a===this?!0:a.J()?this.B===a.B&&this.ba.$(a.ba):!1};h.toString=function(){return z(this.H(!0))};function P(a,b,c){this.k=a;(this.ba=b)&&Id(this.ba);a.e()&&I(!this.ba||this.ba.e(),"An empty node cannot have a priority");this.xb=c;this.Cb=null}h=P.prototype;h.J=function(){return!1};h.C=function(){return this.ba||H};h.ga=function(a){return this.k.e()?this:new P(this.k,a,this.xb)};h.R=function(a){if(".priority"===a)return this.C();a=this.k.get(a);return null===a?H:a};h.Q=function(a){var b=O(a);return null===b?this:this.R(b).Q(E(a))};h.Fa=function(a){return null!==this.k.get(a)};
h.U=function(a,b){I(b,"We should always be passing snapshot nodes");if(".priority"===a)return this.ga(b);var c=new F(a,b),d,e;b.e()?(d=this.k.remove(a),c=Gd(this.xb,c,this.k)):(d=this.k.Qa(a,b),c=Ed(this.xb,c,this.k));e=d.e()?H:this.ba;return new P(d,e,c)};h.F=function(a,b){var c=O(a);if(null===c)return b;I(".priority"!==O(a)||1===Kd(a),".priority must be the last token in a path");var d=this.R(c).F(E(a),b);return this.U(c,d)};h.e=function(){return this.k.e()};h.Db=function(){return this.k.count()};
var Md=/^(0|[1-9]\d*)$/;h=P.prototype;h.H=function(a){if(this.e())return null;var b={},c=0,d=0,e=!0;this.P(L,function(f,g){b[f]=g.H(a);c++;e&&Md.test(f)?d=Math.max(d,Number(f)):e=!1});if(!a&&e&&d<2*c){var f=[],g;for(g in b)f[g]=b[g];return f}a&&!this.C().e()&&(b[".priority"]=this.C().H());return b};h.hash=function(){if(null===this.Cb){var a="";this.C().e()||(a+="priority:"+Ld(this.C().H())+":");this.P(L,function(b,c){var d=c.hash();""!==d&&(a+=":"+b+":"+d)});this.Cb=""===a?"":Nc(a)}return this.Cb};
h.We=function(a,b,c){return(c=Nd(this,c))?(a=yc(c,new F(a,b)))?a.name:null:yc(this.k,a)};function Od(a,b){var c;c=(c=Nd(a,b))?(c=c.Ec())&&c.name:a.k.Ec();return c?new F(c,a.k.get(c)):null}function Pd(a,b){var c;c=(c=Nd(a,b))?(c=c.dc())&&c.name:a.k.dc();return c?new F(c,a.k.get(c)):null}h.P=function(a,b){var c=Nd(this,a);return c?c.ia(function(a){return b(a.name,a.S)}):this.k.ia(b)};h.Vb=function(a){return this.Wb(a.Fc(),a)};
h.Wb=function(a,b){var c=Nd(this,b);if(c)return c.Wb(a,function(a){return a});for(var c=this.k.Wb(a.name,Wb),d=Ac(c);null!=d&&0>b.compare(d,a);)M(c),d=Ac(c);return c};h.Xe=function(a){return this.Yb(a.Dc(),a)};h.Yb=function(a,b){var c=Nd(this,b);if(c)return c.Yb(a,function(a){return a});for(var c=this.k.Yb(a.name,Wb),d=Ac(c);null!=d&&0<b.compare(d,a);)M(c),d=Ac(c);return c};h.qc=function(a){return this.e()?a.e()?0:-1:a.J()||a.e()?1:a===wd?-1:0};
h.mb=function(a){if(a===zd||Aa(this.xb.bc,a.toString()))return this;var b=this.xb,c=this.k;I(a!==zd,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var d=[],e=!1,c=c.Vb(Wb),f=M(c);f;)e=e||a.vc(f.S),d.push(f),f=M(c);d=e?Fd(d,td(a)):sd;e=a.toString();c=Ea(b.bc);c[e]=a;a=Ea(b.ld);a[e]=d;return new P(this.k,this.ba,new Dd(a,c))};h.wc=function(a){return a===zd||Aa(this.xb.bc,a.toString())};
h.$=function(a){if(a===this)return!0;if(a.J())return!1;if(this.C().$(a.C())&&this.k.count()===a.k.count()){var b=this.Vb(L);a=a.Vb(L);for(var c=M(b),d=M(a);c&&d;){if(c.name!==d.name||!c.S.$(d.S))return!1;c=M(b);d=M(a)}return null===c&&null===d}return!1};function Nd(a,b){return b===zd?null:a.xb.get(b.toString())}h.toString=function(){return z(this.H(!0))};function K(a,b){if(null===a)return H;var c=null;"object"===typeof a&&".priority"in a?c=a[".priority"]:"undefined"!==typeof b&&(c=b);I(null===c||"string"===typeof c||"number"===typeof c||"object"===typeof c&&".sv"in c,"Invalid priority type found: "+typeof c);"object"===typeof a&&".value"in a&&null!==a[".value"]&&(a=a[".value"]);if("object"!==typeof a||".sv"in a)return new vc(a,K(c));if(a instanceof Array){var d=H,e=a;v(e,function(a,b){if(Ab(e,b)&&"."!==b.substring(0,1)){var c=K(a);if(c.J()||!c.e())d=
d.U(b,c)}});return d.ga(K(c))}var f=[],g=!1,k=a;Bb(k,function(a){if("string"!==typeof a||"."!==a.substring(0,1)){var b=K(k[a]);b.e()||(g=g||!b.C().e(),f.push(new F(a,b)))}});if(0==f.length)return H;var m=Fd(f,Tb,function(a){return a.name},Vb);if(g){var l=Fd(f,td(L));return new P(m,K(c),new Dd({".priority":l},{".priority":L}))}return new P(m,K(c),Hd)}var Qd=Math.log(2);
function Rd(a){this.count=parseInt(Math.log(a+1)/Qd,10);this.Oe=this.count-1;this.Kf=a+1&parseInt(Array(this.count+1).join("1"),2)}function Sd(a){var b=!(a.Kf&1<<a.Oe);a.Oe--;return b}
function Fd(a,b,c,d){function e(b,d){var f=d-b;if(0==f)return null;if(1==f){var l=a[b],r=c?c(l):l;return new Bc(r,l.S,!1,null,null)}var l=parseInt(f/2,10)+b,f=e(b,l),x=e(l+1,d),l=a[l],r=c?c(l):l;return new Bc(r,l.S,!1,f,x)}a.sort(b);var f=function(b){function d(b,g){var k=r-b,x=r;r-=b;var x=e(k+1,x),k=a[k],G=c?c(k):k,x=new Bc(G,k.S,g,null,x);f?f.left=x:l=x;f=x}for(var f=null,l=null,r=a.length,x=0;x<b.count;++x){var G=Sd(b),nd=Math.pow(2,b.count-(x+1));G?d(nd,!1):(d(nd,!1),d(nd,!0))}return l}(new Rd(a.length));
return null!==f?new wc(d||b,f):new wc(d||b)}function Ld(a){return"number"===typeof a?"number:"+cd(a):"string:"+a}function Id(a){if(a.J()){var b=a.H();I("string"===typeof b||"number"===typeof b||"object"===typeof b&&Ab(b,".sv"),"Priority must be a string or number.")}else I(a===wd||a.e(),"priority of unexpected type.");I(a===wd||a.C().e(),"Priority nodes can't have a priority of their own.")}var H=new P(new wc(Vb),null,Hd);function Td(){P.call(this,new wc(Vb),H,Hd)}ja(Td,P);h=Td.prototype;
h.qc=function(a){return a===this?0:1};h.$=function(a){return a===this};h.C=function(){return this};h.R=function(){return H};h.e=function(){return!1};var wd=new Td,ud=new F("[MIN_NAME]",H),Bd=new F("[MAX_NAME]",wd);function Ud(){this.set={}}h=Ud.prototype;h.add=function(a,b){this.set[a]=null!==b?b:!0};h.contains=function(a){return Ab(this.set,a)};h.get=function(a){return this.contains(a)?this.set[a]:void 0};h.remove=function(a){delete this.set[a]};h.clear=function(){this.set={}};h.e=function(){return Da(this.set)};h.count=function(){return wa(this.set)};function Vd(a,b){v(a.set,function(a,d){b(d,a)})}h.keys=function(){var a=[];v(this.set,function(b,c){a.push(c)});return a};function Wd(a){I(da(a)&&0<a.length,"Requires a non-empty array");this.Jf=a;this.Bc={}}Wd.prototype.Ee=function(a,b){var c;c=this.Bc[a]||[];var d=c.length;if(0<d){for(var e=Array(d),f=0;f<d;f++)e[f]=c[f];c=e}else c=[];for(d=0;d<c.length;d++)c[d].Ie.apply(c[d].Oa,Array.prototype.slice.call(arguments,1))};Wd.prototype.ec=function(a,b,c){Xd(this,a);this.Bc[a]=this.Bc[a]||[];this.Bc[a].push({Ie:b,Oa:c});(a=this.Ve(a))&&b.apply(c,a)};
Wd.prototype.Gc=function(a,b,c){Xd(this,a);a=this.Bc[a]||[];for(var d=0;d<a.length;d++)if(a[d].Ie===b&&(!c||c===a[d].Oa)){a.splice(d,1);break}};function Xd(a,b){I(La(a.Jf,function(a){return a===b}),"Unknown event: "+b)};var Yd=function(){var a=0,b=[];return function(c){var d=c===a;a=c;for(var e=Array(8),f=7;0<=f;f--)e[f]="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(c%64),c=Math.floor(c/64);I(0===c,"Cannot push at time == 0");c=e.join("");if(d){for(f=11;0<=f&&63===b[f];f--)b[f]=0;b[f]++}else for(f=0;12>f;f++)b[f]=Math.floor(64*Math.random());for(f=0;12>f;f++)c+="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(b[f]);I(20===c.length,"nextPushId: Length should be 20.");
return c}}();function J(a,b){if(1==arguments.length){this.o=a.split("/");for(var c=0,d=0;d<this.o.length;d++)0<this.o[d].length&&(this.o[c]=this.o[d],c++);this.o.length=c;this.Z=0}else this.o=a,this.Z=b}function Q(a,b){var c=O(a);if(null===c)return b;if(c===O(b))return Q(E(a),E(b));throw Error("INTERNAL ERROR: innerPath ("+b+") is not within outerPath ("+a+")");}
function Zd(a,b){for(var c=a.slice(),d=b.slice(),e=0;e<c.length&&e<d.length;e++){var f=Ub(c[e],d[e]);if(0!==f)return f}return c.length===d.length?0:c.length<d.length?-1:1}function O(a){return a.Z>=a.o.length?null:a.o[a.Z]}function Kd(a){return a.o.length-a.Z}function E(a){var b=a.Z;b<a.o.length&&b++;return new J(a.o,b)}function $d(a){return a.Z<a.o.length?a.o[a.o.length-1]:null}h=J.prototype;
h.toString=function(){for(var a="",b=this.Z;b<this.o.length;b++)""!==this.o[b]&&(a+="/"+this.o[b]);return a||"/"};h.slice=function(a){return this.o.slice(this.Z+(a||0))};h.parent=function(){if(this.Z>=this.o.length)return null;for(var a=[],b=this.Z;b<this.o.length-1;b++)a.push(this.o[b]);return new J(a,0)};
h.m=function(a){for(var b=[],c=this.Z;c<this.o.length;c++)b.push(this.o[c]);if(a instanceof J)for(c=a.Z;c<a.o.length;c++)b.push(a.o[c]);else for(a=a.split("/"),c=0;c<a.length;c++)0<a[c].length&&b.push(a[c]);return new J(b,0)};h.e=function(){return this.Z>=this.o.length};h.$=function(a){if(Kd(this)!==Kd(a))return!1;for(var b=this.Z,c=a.Z;b<=this.o.length;b++,c++)if(this.o[b]!==a.o[c])return!1;return!0};
h.contains=function(a){var b=this.Z,c=a.Z;if(Kd(this)>Kd(a))return!1;for(;b<this.o.length;){if(this.o[b]!==a.o[c])return!1;++b;++c}return!0};var D=new J("");function ae(a,b){this.Sa=a.slice();this.Ja=Math.max(1,this.Sa.length);this.Qe=b;for(var c=0;c<this.Sa.length;c++)this.Ja+=Hb(this.Sa[c]);be(this)}ae.prototype.push=function(a){0<this.Sa.length&&(this.Ja+=1);this.Sa.push(a);this.Ja+=Hb(a);be(this)};ae.prototype.pop=function(){var a=this.Sa.pop();this.Ja-=Hb(a);0<this.Sa.length&&--this.Ja};
function be(a){if(768<a.Ja)throw Error(a.Qe+"has a key path longer than 768 bytes ("+a.Ja+").");if(32<a.Sa.length)throw Error(a.Qe+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+ce(a));}function ce(a){return 0==a.Sa.length?"":"in property '"+a.Sa.join(".")+"'"};function de(a){a instanceof ee||Uc("Don't call new Database() directly - please use firebase.database().");this.ua=a;this.ca=new R(a,D);this.INTERNAL=new fe(this)}var ge={TIMESTAMP:{".sv":"timestamp"}};h=de.prototype;h.app=null;h.nf=function(a){he(this,"ref");B("database.ref",0,1,arguments.length);return p(a)?this.ca.m(a):this.ca};
h.rg=function(a){he(this,"database.refFromURL");B("database.refFromURL",1,1,arguments.length);var b=Vc(a);ie("database.refFromURL",b);var c=b.hc;c.host!==this.ua.M.host&&Uc("database.refFromURL: Host name does not match the current database: (found "+c.host+" but expected "+this.ua.M.host+")");return this.nf(b.path.toString())};function he(a,b){null===a.ua&&Uc("Cannot call "+b+" on a deleted database.")}h.$f=function(){B("database.goOffline",0,0,arguments.length);he(this,"goOffline");this.ua.bb()};
h.ag=function(){B("database.goOnline",0,0,arguments.length);he(this,"goOnline");this.ua.ic()};Object.defineProperty(de.prototype,"app",{get:function(){return this.ua.app}});function fe(a){this.Za=a}fe.prototype.delete=function(){he(this.Za,"delete");var a=je.Ub(),b=this.Za.ua;A(a.lb,b.app.name)!==b&&Uc("Database "+b.app.name+" has already been deleted.");b.bb();delete a.lb[b.app.name];this.Za.ua=null;this.Za.ca=null;this.Za=this.Za.INTERNAL=null;return firebase.Promise.resolve()};
de.prototype.ref=de.prototype.nf;de.prototype.refFromURL=de.prototype.rg;de.prototype.goOnline=de.prototype.ag;de.prototype.goOffline=de.prototype.$f;fe.prototype["delete"]=fe.prototype.delete;function rc(){this.k=this.B=null}rc.prototype.find=function(a){if(null!=this.B)return this.B.Q(a);if(a.e()||null==this.k)return null;var b=O(a);a=E(a);return this.k.contains(b)?this.k.get(b).find(a):null};function tc(a,b,c){if(b.e())a.B=c,a.k=null;else if(null!==a.B)a.B=a.B.F(b,c);else{null==a.k&&(a.k=new Ud);var d=O(b);a.k.contains(d)||a.k.add(d,new rc);a=a.k.get(d);b=E(b);tc(a,b,c)}}
function ke(a,b){if(b.e())return a.B=null,a.k=null,!0;if(null!==a.B){if(a.B.J())return!1;var c=a.B;a.B=null;c.P(L,function(b,c){tc(a,new J(b),c)});return ke(a,b)}return null!==a.k?(c=O(b),b=E(b),a.k.contains(c)&&ke(a.k.get(c),b)&&a.k.remove(c),a.k.e()?(a.k=null,!0):!1):!0}function sc(a,b,c){null!==a.B?c(b,a.B):a.P(function(a,e){var f=new J(b.toString()+"/"+a);sc(e,f,c)})}rc.prototype.P=function(a){null!==this.k&&Vd(this.k,function(b,c){a(b,c)})};function le(a,b){this.value=a;this.children=b||me}var me=new wc(function(a,b){return a===b?0:a<b?-1:1});function ne(a){var b=S;v(a,function(a,d){b=b.set(new J(d),a)});return b}h=le.prototype;h.e=function(){return null===this.value&&this.children.e()};function oe(a,b,c){if(null!=a.value&&c(a.value))return{path:D,value:a.value};if(b.e())return null;var d=O(b);a=a.children.get(d);return null!==a?(b=oe(a,E(b),c),null!=b?{path:(new J(d)).m(b.path),value:b.value}:null):null}
function pe(a,b){return oe(a,b,function(){return!0})}h.subtree=function(a){if(a.e())return this;var b=this.children.get(O(a));return null!==b?b.subtree(E(a)):S};h.set=function(a,b){if(a.e())return new le(b,this.children);var c=O(a),d=(this.children.get(c)||S).set(E(a),b),c=this.children.Qa(c,d);return new le(this.value,c)};
h.remove=function(a){if(a.e())return this.children.e()?S:new le(null,this.children);var b=O(a),c=this.children.get(b);return c?(a=c.remove(E(a)),b=a.e()?this.children.remove(b):this.children.Qa(b,a),null===this.value&&b.e()?S:new le(this.value,b)):this};h.get=function(a){if(a.e())return this.value;var b=this.children.get(O(a));return b?b.get(E(a)):null};
function qe(a,b,c){if(b.e())return c;var d=O(b);b=qe(a.children.get(d)||S,E(b),c);d=b.e()?a.children.remove(d):a.children.Qa(d,b);return new le(a.value,d)}function re(a,b){return se(a,D,b)}function se(a,b,c){var d={};a.children.ia(function(a,f){d[a]=se(f,b.m(a),c)});return c(b,a.value,d)}function te(a,b,c){return ue(a,b,D,c)}function ue(a,b,c,d){var e=a.value?d(c,a.value):!1;if(e)return e;if(b.e())return null;e=O(b);return(a=a.children.get(e))?ue(a,E(b),c.m(e),d):null}
function ve(a,b,c){we(a,b,D,c)}function we(a,b,c,d){if(b.e())return a;a.value&&d(c,a.value);var e=O(b);return(a=a.children.get(e))?we(a,E(b),c.m(e),d):S}function xe(a,b){ye(a,D,b)}function ye(a,b,c){a.children.ia(function(a,e){ye(e,b.m(a),c)});a.value&&c(b,a.value)}function ze(a,b){a.children.ia(function(a,d){d.value&&b(a,d.value)})}var S=new le(null);le.prototype.toString=function(){var a={};xe(this,function(b,c){a[b.toString()]=c.toString()});return z(a)};function Ae(a){this.X=a}var Be=new Ae(new le(null));function Ce(a,b,c){if(b.e())return new Ae(new le(c));var d=pe(a.X,b);if(null!=d){var e=d.path,d=d.value;b=Q(e,b);d=d.F(b,c);return new Ae(a.X.set(e,d))}a=qe(a.X,b,new le(c));return new Ae(a)}function De(a,b,c){var d=a;Bb(c,function(a,c){d=Ce(d,b.m(a),c)});return d}Ae.prototype.Cd=function(a){if(a.e())return Be;a=qe(this.X,a,S);return new Ae(a)};function Ee(a,b){var c=pe(a.X,b);return null!=c?a.X.get(c.path).Q(Q(c.path,b)):null}
function Fe(a){var b=[],c=a.X.value;null!=c?c.J()||c.P(L,function(a,c){b.push(new F(a,c))}):a.X.children.ia(function(a,c){null!=c.value&&b.push(new F(a,c.value))});return b}function Ge(a,b){if(b.e())return a;var c=Ee(a,b);return null!=c?new Ae(new le(c)):new Ae(a.X.subtree(b))}Ae.prototype.e=function(){return this.X.e()};Ae.prototype.apply=function(a){return He(D,this.X,a)};
function He(a,b,c){if(null!=b.value)return c.F(a,b.value);var d=null;b.children.ia(function(b,f){".priority"===b?(I(null!==f.value,"Priority writes must always be leaf nodes"),d=f.value):c=He(a.m(b),f,c)});c.Q(a).e()||null===d||(c=c.F(a.m(".priority"),d));return c};function Ie(a,b,c){this.type=Je;this.source=Ke;this.path=a;this.Nb=b;this.Gd=c}Ie.prototype.Kc=function(a){if(this.path.e()){if(null!=this.Nb.value)return I(this.Nb.children.e(),"affectedTree should not have overlapping affected paths."),this;a=this.Nb.subtree(new J(a));return new Ie(D,a,this.Gd)}I(O(this.path)===a,"operationForChild called for unrelated child.");return new Ie(E(this.path),this.Nb,this.Gd)};
Ie.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" ack write revert="+this.Gd+" affectedTree="+this.Nb+")"};var Sb=0,kd=1,Je=2,Qb=3;function Le(a,b,c,d){this.be=a;this.Te=b;this.Gb=c;this.Ce=d;I(!d||b,"Tagged queries must be from server.")}var Ke=new Le(!0,!1,null,!1),Me=new Le(!1,!0,null,!1);Le.prototype.toString=function(){return this.be?"user":this.Ce?"server(queryID="+this.Gb+")":"server"};function Ne(){this.children={};this.Yc=0;this.value=null}function Oe(a,b,c){this.sd=a?a:"";this.Ga=b?b:null;this.A=c?c:new Ne}function Pe(a,b){for(var c=b instanceof J?b:new J(b),d=a,e;null!==(e=O(c));)d=new Oe(e,d,A(d.A.children,e)||new Ne),c=E(c);return d}h=Oe.prototype;h.Ea=function(){return this.A.value};function Qe(a,b){I("undefined"!==typeof b,"Cannot set value to undefined");a.A.value=b;Re(a)}h.clear=function(){this.A.value=null;this.A.children={};this.A.Yc=0;Re(this)};
h.gd=function(){return 0<this.A.Yc};h.e=function(){return null===this.Ea()&&!this.gd()};h.P=function(a){var b=this;v(this.A.children,function(c,d){a(new Oe(d,b,c))})};function Se(a,b,c,d){c&&!d&&b(a);a.P(function(a){Se(a,b,!0,d)});c&&d&&b(a)}function Te(a,b){for(var c=a.parent();null!==c&&!b(c);)c=c.parent()}h.path=function(){return new J(null===this.Ga?this.sd:this.Ga.path()+"/"+this.sd)};h.name=function(){return this.sd};h.parent=function(){return this.Ga};
function Re(a){if(null!==a.Ga){var b=a.Ga,c=a.sd,d=a.e(),e=Ab(b.A.children,c);d&&e?(delete b.A.children[c],b.A.Yc--,Re(b)):d||e||(b.A.children[c]=a.A,b.A.Yc++,Re(b))}};var Ue=/[\[\].#$\/\u0000-\u001F\u007F]/,Ve=/[\[\].#$\u0000-\u001F\u007F]/;function We(a){return q(a)&&0!==a.length&&!Ue.test(a)}function Xe(a){return null===a||q(a)||fa(a)&&!Wc(a)||ga(a)&&Ab(a,".sv")}function Ye(a,b,c,d){d&&!p(b)||Ze(Jb(a,1,d),b,c)}
function Ze(a,b,c){c instanceof J&&(c=new ae(c,a));if(!p(b))throw Error(a+"contains undefined "+ce(c));if(t(b))throw Error(a+"contains a function "+ce(c)+" with contents: "+b.toString());if(Wc(b))throw Error(a+"contains "+b.toString()+" "+ce(c));if(q(b)&&b.length>10485760/3&&10485760<Hb(b))throw Error(a+"contains a string greater than 10485760 utf8 bytes "+ce(c)+" ('"+b.substring(0,50)+"...')");if(ga(b)){var d=!1,e=!1;Bb(b,function(b,g){if(".value"===b)d=!0;else if(".priority"!==b&&".sv"!==b&&(e=
!0,!We(b)))throw Error(a+" contains an invalid key ("+b+") "+ce(c)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');c.push(b);Ze(a,g,c);c.pop()});if(d&&e)throw Error(a+' contains ".value" child '+ce(c)+" in addition to actual children.");}}
function $e(a,b){var c,d;for(c=0;c<b.length;c++){d=b[c];for(var e=d.slice(),f=0;f<e.length;f++)if((".priority"!==e[f]||f!==e.length-1)&&!We(e[f]))throw Error(a+"contains an invalid key ("+e[f]+") in path "+d.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');}b.sort(Zd);e=null;for(c=0;c<b.length;c++){d=b[c];if(null!==e&&e.contains(d))throw Error(a+"contains a path "+e.toString()+" that is ancestor of another path "+d.toString());e=d}}
function af(a,b,c){var d=Jb(a,1,!1);if(!ga(b)||da(b))throw Error(d+" must be an object containing the children to replace.");var e=[];Bb(b,function(a,b){var k=new J(a);Ze(d,b,c.m(k));if(".priority"===$d(k)&&!Xe(b))throw Error(d+"contains an invalid value for '"+k.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");e.push(k)});$e(d,e)}
function bf(a,b,c){if(Wc(c))throw Error(Jb(a,b,!1)+"is "+c.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Xe(c))throw Error(Jb(a,b,!1)+"must be a valid Firebase priority (a string, finite number, server value, or null).");}
function cf(a,b,c){if(!c||p(b))switch(b){case "value":case "child_added":case "child_removed":case "child_changed":case "child_moved":break;default:throw Error(Jb(a,1,c)+'must be a valid event type: "value", "child_added", "child_removed", "child_changed", or "child_moved".');}}function df(a,b){if(p(b)&&!We(b))throw Error(Jb(a,2,!0)+'was an invalid key: "'+b+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").');}
function ef(a,b){if(!q(b)||0===b.length||Ve.test(b))throw Error(Jb(a,1,!1)+'was an invalid path: "'+b+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"');}function ff(a,b){if(".info"===O(b))throw Error(a+" failed: Can't modify data under /.info/");}
function ie(a,b){var c=b.path.toString(),d;!(d=!q(b.hc.host)||0===b.hc.host.length||!We(b.hc.ne))&&(d=0!==c.length)&&(c&&(c=c.replace(/^\/*\.info(\/|$)/,"/")),d=!(q(c)&&0!==c.length&&!Ve.test(c)));if(d)throw Error(Jb(a,1,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".');};function T(a,b,c){this.A=a;this.W=b;this.g=c}T.prototype.H=function(){B("Firebase.DataSnapshot.val",0,0,arguments.length);return this.A.H()};T.prototype.val=T.prototype.H;T.prototype.Re=function(){B("Firebase.DataSnapshot.exportVal",0,0,arguments.length);return this.A.H(!0)};T.prototype.exportVal=T.prototype.Re;T.prototype.Vf=function(){B("Firebase.DataSnapshot.exists",0,0,arguments.length);return!this.A.e()};T.prototype.exists=T.prototype.Vf;
T.prototype.m=function(a){B("Firebase.DataSnapshot.child",0,1,arguments.length);fa(a)&&(a=String(a));ef("Firebase.DataSnapshot.child",a);var b=new J(a),c=this.W.m(b);return new T(this.A.Q(b),c,L)};T.prototype.child=T.prototype.m;T.prototype.Fa=function(a){B("Firebase.DataSnapshot.hasChild",1,1,arguments.length);ef("Firebase.DataSnapshot.hasChild",a);var b=new J(a);return!this.A.Q(b).e()};T.prototype.hasChild=T.prototype.Fa;
T.prototype.C=function(){B("Firebase.DataSnapshot.getPriority",0,0,arguments.length);return this.A.C().H()};T.prototype.getPriority=T.prototype.C;T.prototype.forEach=function(a){B("Firebase.DataSnapshot.forEach",1,1,arguments.length);C("Firebase.DataSnapshot.forEach",1,a,!1);if(this.A.J())return!1;var b=this;return!!this.A.P(this.g,function(c,d){return a(new T(d,b.W.m(c),L))})};T.prototype.forEach=T.prototype.forEach;
T.prototype.gd=function(){B("Firebase.DataSnapshot.hasChildren",0,0,arguments.length);return this.A.J()?!1:!this.A.e()};T.prototype.hasChildren=T.prototype.gd;T.prototype.getKey=function(){B("Firebase.DataSnapshot.key",0,0,arguments.length);return this.W.getKey()};fd(T.prototype,"key",T.prototype.getKey);T.prototype.Db=function(){B("Firebase.DataSnapshot.numChildren",0,0,arguments.length);return this.A.Db()};T.prototype.numChildren=T.prototype.Db;
T.prototype.vb=function(){B("Firebase.DataSnapshot.ref",0,0,arguments.length);return this.W};fd(T.prototype,"ref",T.prototype.vb);function U(a,b){this.ua=a;this.ra=b}U.prototype.cancel=function(a){B("Firebase.onDisconnect().cancel",0,1,arguments.length);C("Firebase.onDisconnect().cancel",1,a,!0);var b=new Db;this.ua.vd(this.ra,Eb(b,a));return b.sa};U.prototype.cancel=U.prototype.cancel;U.prototype.remove=function(a){B("Firebase.onDisconnect().remove",0,1,arguments.length);ff("Firebase.onDisconnect().remove",this.ra);C("Firebase.onDisconnect().remove",1,a,!0);var b=new Db;gf(this.ua,this.ra,null,Eb(b,a));return b.sa};
U.prototype.remove=U.prototype.remove;U.prototype.set=function(a,b){B("Firebase.onDisconnect().set",1,2,arguments.length);ff("Firebase.onDisconnect().set",this.ra);Ye("Firebase.onDisconnect().set",a,this.ra,!1);C("Firebase.onDisconnect().set",2,b,!0);var c=new Db;gf(this.ua,this.ra,a,Eb(c,b));return c.sa};U.prototype.set=U.prototype.set;
U.prototype.Ib=function(a,b,c){B("Firebase.onDisconnect().setWithPriority",2,3,arguments.length);ff("Firebase.onDisconnect().setWithPriority",this.ra);Ye("Firebase.onDisconnect().setWithPriority",a,this.ra,!1);bf("Firebase.onDisconnect().setWithPriority",2,b);C("Firebase.onDisconnect().setWithPriority",3,c,!0);var d=new Db;hf(this.ua,this.ra,a,b,Eb(d,c));return d.sa};U.prototype.setWithPriority=U.prototype.Ib;
U.prototype.update=function(a,b){B("Firebase.onDisconnect().update",1,2,arguments.length);ff("Firebase.onDisconnect().update",this.ra);if(da(a)){for(var c={},d=0;d<a.length;++d)c[""+d]=a[d];a=c;N("Passing an Array to Firebase.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}af("Firebase.onDisconnect().update",a,this.ra);C("Firebase.onDisconnect().update",2,b,!0);
c=new Db;jf(this.ua,this.ra,a,Eb(c,b));return c.sa};U.prototype.update=U.prototype.update;function kf(){Wd.call(this,["visible"]);var a,b;"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(b="visibilitychange",a="hidden"):"undefined"!==typeof document.mozHidden?(b="mozvisibilitychange",a="mozHidden"):"undefined"!==typeof document.msHidden?(b="msvisibilitychange",a="msHidden"):"undefined"!==typeof document.webkitHidden&&(b="webkitvisibilitychange",a="webkitHidden"));this.Lb=!0;if(b){var c=this;document.addEventListener(b,
function(){var b=!document[a];b!==c.Lb&&(c.Lb=b,c.Ee("visible",b))},!1)}}ja(kf,Wd);kf.prototype.Ve=function(a){I("visible"===a,"Unknown event type: "+a);return[this.Lb]};ba(kf);function lf(a,b,c){this.A=a;this.ea=b;this.Rb=c}function mf(a){return a.ea}function nf(a){return a.Rb}function of(a,b){return b.e()?a.ea&&!a.Rb:pf(a,O(b))}function pf(a,b){return a.ea&&!a.Rb||a.A.Fa(b)}lf.prototype.j=function(){return this.A};function V(a,b,c,d){this.type=a;this.La=b;this.Ya=c;this.oe=d;this.Bd=void 0}function qf(a){return new V(rf,a)}var rf="value";function sf(){this.gb={}}
function tf(a,b){var c=b.type,d=b.Ya;I("child_added"==c||"child_changed"==c||"child_removed"==c,"Only child changes supported for tracking");I(".priority"!==d,"Only non-priority child changes can be tracked.");var e=A(a.gb,d);if(e){var f=e.type;if("child_added"==c&&"child_removed"==f)a.gb[d]=new V("child_changed",b.La,d,e.La);else if("child_removed"==c&&"child_added"==f)delete a.gb[d];else if("child_removed"==c&&"child_changed"==f)a.gb[d]=new V("child_removed",e.oe,d);else if("child_changed"==c&&
"child_added"==f)a.gb[d]=new V("child_added",b.La,d);else if("child_changed"==c&&"child_changed"==f)a.gb[d]=new V("child_changed",b.La,d,e.oe);else throw Lc("Illegal combination of changes: "+b+" occurred after "+e);}else a.gb[d]=b};function uf(){}uf.prototype.Ue=function(){return null};uf.prototype.ce=function(){return null};var vf=new uf;function wf(a,b,c){this.Ff=a;this.Ma=b;this.wd=c}wf.prototype.Ue=function(a){var b=this.Ma.O;if(pf(b,a))return b.j().R(a);b=null!=this.wd?new lf(this.wd,!0,!1):this.Ma.w();return this.Ff.oc(a,b)};wf.prototype.ce=function(a,b,c){var d=null!=this.wd?this.wd:xf(this.Ma);a=this.Ff.Td(d,b,1,c,a);return 0===a.length?null:a[0]};function yf(a,b,c,d){this.Yd=b;this.Jd=c;this.Bd=d;this.dd=a}yf.prototype.Xb=function(){var a=this.Jd.vb();return"value"===this.dd?a.path:a.getParent().path};yf.prototype.de=function(){return this.dd};yf.prototype.Sb=function(){return this.Yd.Sb(this)};yf.prototype.toString=function(){return this.Xb().toString()+":"+this.dd+":"+z(this.Jd.Re())};function zf(a,b,c){this.Yd=a;this.error=b;this.path=c}zf.prototype.Xb=function(){return this.path};zf.prototype.de=function(){return"cancel"};
zf.prototype.Sb=function(){return this.Yd.Sb(this)};zf.prototype.toString=function(){return this.path.toString()+":cancel"};function Af(a){this.W=a;this.g=a.n.g}function Bf(a,b,c,d){var e=[],f=[];Ga(b,function(b){"child_changed"===b.type&&a.g.kd(b.oe,b.La)&&f.push(new V("child_moved",b.La,b.Ya))});Cf(a,e,"child_removed",b,d,c);Cf(a,e,"child_added",b,d,c);Cf(a,e,"child_moved",f,d,c);Cf(a,e,"child_changed",b,d,c);Cf(a,e,rf,b,d,c);return e}function Cf(a,b,c,d,e,f){d=Ha(d,function(a){return a.type===c});Oa(d,u(a.Of,a));Ga(d,function(c){var d=Df(a,c,f);Ga(e,function(e){e.rf(c.type)&&b.push(e.createEvent(d,a.W))})})}
function Df(a,b,c){"value"!==b.type&&"child_removed"!==b.type&&(b.Bd=c.We(b.Ya,b.La,a.g));return b}Af.prototype.Of=function(a,b){if(null==a.Ya||null==b.Ya)throw Lc("Should only compare child_ events.");return this.g.compare(new F(a.Ya,a.La),new F(b.Ya,b.La))};function Ef(){this.ub=[]}function Ff(a,b){for(var c=null,d=0;d<b.length;d++){var e=b[d],f=e.Xb();null===c||f.$(c.Xb())||(a.ub.push(c),c=null);null===c&&(c=new Gf(f));c.add(e)}c&&a.ub.push(c)}function Hf(a,b,c){Ff(a,c);If(a,function(a){return a.$(b)})}function Jf(a,b,c){Ff(a,c);If(a,function(a){return a.contains(b)||b.contains(a)})}
function If(a,b){for(var c=!0,d=0;d<a.ub.length;d++){var e=a.ub[d];if(e)if(e=e.Xb(),b(e)){for(var e=a.ub[d],f=0;f<e.ed.length;f++){var g=e.ed[f];if(null!==g){e.ed[f]=null;var k=g.Sb();Pc&&Nb("event: "+g.toString());ed(k)}}a.ub[d]=null}else c=!1}c&&(a.ub=[])}function Gf(a){this.ra=a;this.ed=[]}Gf.prototype.add=function(a){this.ed.push(a)};Gf.prototype.Xb=function(){return this.ra};function Kf(a,b,c){this.Ob=a;this.qb=b;this.sb=c||null}h=Kf.prototype;h.rf=function(a){return"value"===a};h.createEvent=function(a,b){var c=b.n.g;return new yf("value",this,new T(a.La,b.vb(),c))};h.Sb=function(a){var b=this.sb;if("cancel"===a.de()){I(this.qb,"Raising a cancel event on a listener with no cancel callback");var c=this.qb;return function(){c.call(b,a.error)}}var d=this.Ob;return function(){d.call(b,a.Jd)}};h.Me=function(a,b){return this.qb?new zf(this,a,b):null};
h.matches=function(a){return a instanceof Kf?a.Ob&&this.Ob?a.Ob===this.Ob&&a.sb===this.sb:!0:!1};h.Ye=function(){return null!==this.Ob};function Lf(a,b,c){this.ha=a;this.qb=b;this.sb=c}h=Lf.prototype;h.rf=function(a){a="children_added"===a?"child_added":a;return("children_removed"===a?"child_removed":a)in this.ha};h.Me=function(a,b){return this.qb?new zf(this,a,b):null};
h.createEvent=function(a,b){I(null!=a.Ya,"Child events should have a childName.");var c=b.vb().m(a.Ya);return new yf(a.type,this,new T(a.La,c,b.n.g),a.Bd)};h.Sb=function(a){var b=this.sb;if("cancel"===a.de()){I(this.qb,"Raising a cancel event on a listener with no cancel callback");var c=this.qb;return function(){c.call(b,a.error)}}var d=this.ha[a.dd];return function(){d.call(b,a.Jd,a.Bd)}};
h.matches=function(a){if(a instanceof Lf){if(!this.ha||!a.ha)return!0;if(this.sb===a.sb){var b=wa(a.ha);if(b===wa(this.ha)){if(1===b){var b=xa(a.ha),c=xa(this.ha);return c===b&&(!a.ha[b]||!this.ha[c]||a.ha[b]===this.ha[c])}return va(this.ha,function(b,c){return a.ha[c]===b})}}}return!1};h.Ye=function(){return null!==this.ha};function W(a,b,c,d){this.u=a;this.path=b;this.n=c;this.Lc=d}
function Mf(a){var b=null,c=null;a.la&&(b=Nf(a));a.oa&&(c=Of(a));if(a.g===zd){if(a.la){if("[MIN_NAME]"!=Pf(a))throw Error("Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().");if("string"!==typeof b)throw Error("Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.");}if(a.oa){if("[MAX_NAME]"!=Qf(a))throw Error("Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().");if("string"!==
typeof c)throw Error("Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.");}}else if(a.g===L){if(null!=b&&!Xe(b)||null!=c&&!Xe(c))throw Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).");}else if(I(a.g instanceof vd||a.g===Cd,"unknown index type."),null!=b&&"object"===typeof b||null!=c&&"object"===typeof c)throw Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.");
}function Rf(a){if(a.la&&a.oa&&a.ya&&(!a.ya||""===a.lc))throw Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.");}function Sf(a,b){if(!0===a.Lc)throw Error(b+": You can't combine multiple orderBy calls.");}h=W.prototype;h.vb=function(){B("Query.ref",0,0,arguments.length);return new R(this.u,this.path)};
h.ec=function(a,b,c,d){B("Query.on",2,4,arguments.length);cf("Query.on",a,!1);C("Query.on",2,b,!1);var e=Tf("Query.on",c,d);if("value"===a)Uf(this.u,this,new Kf(b,e.cancel||null,e.Oa||null));else{var f={};f[a]=b;Uf(this.u,this,new Lf(f,e.cancel,e.Oa))}return b};
h.Gc=function(a,b,c){B("Query.off",0,3,arguments.length);cf("Query.off",a,!0);C("Query.off",2,b,!0);Kb("Query.off",3,c);var d=null,e=null;"value"===a?d=new Kf(b||null,null,c||null):a&&(b&&(e={},e[a]=b),d=new Lf(e,null,c||null));e=this.u;d=".info"===O(this.path)?e.md.kb(this,d):e.K.kb(this,d);Hf(e.da,this.path,d)};
h.jg=function(a,b){function c(k){f&&(f=!1,e.Gc(a,c),b&&b.call(d.Oa,k),g.resolve(k))}B("Query.once",1,4,arguments.length);cf("Query.once",a,!1);C("Query.once",2,b,!0);var d=Tf("Query.once",arguments[2],arguments[3]),e=this,f=!0,g=new Db;Fb(g.sa);this.ec(a,c,function(b){e.Gc(a,c);d.cancel&&d.cancel.call(d.Oa,b);g.reject(b)});return g.sa};
h.ke=function(a){B("Query.limitToFirst",1,1,arguments.length);if(!fa(a)||Math.floor(a)!==a||0>=a)throw Error("Query.limitToFirst: First argument must be a positive integer.");if(this.n.ya)throw Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new W(this.u,this.path,this.n.ke(a),this.Lc)};
h.le=function(a){B("Query.limitToLast",1,1,arguments.length);if(!fa(a)||Math.floor(a)!==a||0>=a)throw Error("Query.limitToLast: First argument must be a positive integer.");if(this.n.ya)throw Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new W(this.u,this.path,this.n.le(a),this.Lc)};
h.kg=function(a){B("Query.orderByChild",1,1,arguments.length);if("$key"===a)throw Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===a)throw Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===a)throw Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');ef("Query.orderByChild",a);Sf(this,"Query.orderByChild");var b=new J(a);if(b.e())throw Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");
b=new vd(b);b=Vf(this.n,b);Mf(b);return new W(this.u,this.path,b,!0)};h.lg=function(){B("Query.orderByKey",0,0,arguments.length);Sf(this,"Query.orderByKey");var a=Vf(this.n,zd);Mf(a);return new W(this.u,this.path,a,!0)};h.mg=function(){B("Query.orderByPriority",0,0,arguments.length);Sf(this,"Query.orderByPriority");var a=Vf(this.n,L);Mf(a);return new W(this.u,this.path,a,!0)};
h.ng=function(){B("Query.orderByValue",0,0,arguments.length);Sf(this,"Query.orderByValue");var a=Vf(this.n,Cd);Mf(a);return new W(this.u,this.path,a,!0)};h.Kd=function(a,b){B("Query.startAt",0,2,arguments.length);Ye("Query.startAt",a,this.path,!0);df("Query.startAt",b);var c=this.n.Kd(a,b);Rf(c);Mf(c);if(this.n.la)throw Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");p(a)||(b=a=null);return new W(this.u,this.path,c,this.Lc)};
h.cd=function(a,b){B("Query.endAt",0,2,arguments.length);Ye("Query.endAt",a,this.path,!0);df("Query.endAt",b);var c=this.n.cd(a,b);Rf(c);Mf(c);if(this.n.oa)throw Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new W(this.u,this.path,c,this.Lc)};
h.Rf=function(a,b){B("Query.equalTo",1,2,arguments.length);Ye("Query.equalTo",a,this.path,!1);df("Query.equalTo",b);if(this.n.la)throw Error("Query.equalTo: Starting point was already set (by another call to endAt or equalTo).");if(this.n.oa)throw Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.Kd(a,b).cd(a,b)};
h.toString=function(){B("Query.toString",0,0,arguments.length);for(var a=this.path,b="",c=a.Z;c<a.o.length;c++)""!==a.o[c]&&(b+="/"+encodeURIComponent(String(a.o[c])));return this.u.toString()+(b||"/")};h.ka=function(){var a=$c(Wf(this.n));return"{}"===a?"default":a};
h.isEqual=function(a){B("Query.isEqual",1,1,arguments.length);if(!(a instanceof W))throw Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");var b=this.u===a.u,c=this.path.$(a.path),d=this.ka()===a.ka();return b&&c&&d};
function Tf(a,b,c){var d={cancel:null,Oa:null};if(b&&c)d.cancel=b,C(a,3,d.cancel,!0),d.Oa=c,Kb(a,4,d.Oa);else if(b)if("object"===typeof b&&null!==b)d.Oa=b;else if("function"===typeof b)d.cancel=b;else throw Error(Jb(a,3,!0)+" must either be a cancel callback or a context object.");return d}W.prototype.on=W.prototype.ec;W.prototype.off=W.prototype.Gc;W.prototype.once=W.prototype.jg;W.prototype.limitToFirst=W.prototype.ke;W.prototype.limitToLast=W.prototype.le;W.prototype.orderByChild=W.prototype.kg;
W.prototype.orderByKey=W.prototype.lg;W.prototype.orderByPriority=W.prototype.mg;W.prototype.orderByValue=W.prototype.ng;W.prototype.startAt=W.prototype.Kd;W.prototype.endAt=W.prototype.cd;W.prototype.equalTo=W.prototype.Rf;W.prototype.toString=W.prototype.toString;W.prototype.isEqual=W.prototype.isEqual;fd(W.prototype,"ref",W.prototype.vb);function Xf(a){this.g=a}h=Xf.prototype;h.F=function(a,b,c,d,e,f){I(a.wc(this.g),"A node must be indexed if only a child is updated");e=a.R(b);if(e.Q(d).$(c.Q(d))&&e.e()==c.e())return a;null!=f&&(c.e()?a.Fa(b)?tf(f,new V("child_removed",e,b)):I(a.J(),"A child remove without an old child only makes sense on a leaf node"):e.e()?tf(f,new V("child_added",c,b)):tf(f,new V("child_changed",c,b,e)));return a.J()&&c.e()?a:a.U(b,c).mb(this.g)};
h.za=function(a,b,c){null!=c&&(a.J()||a.P(L,function(a,e){b.Fa(a)||tf(c,new V("child_removed",e,a))}),b.J()||b.P(L,function(b,e){if(a.Fa(b)){var f=a.R(b);f.$(e)||tf(c,new V("child_changed",e,b,f))}else tf(c,new V("child_added",e,b))}));return b.mb(this.g)};h.ga=function(a,b){return a.e()?H:a.ga(b)};h.Pa=function(){return!1};h.Tb=function(){return this};function Yf(a){this.ee=new Xf(a.g);this.g=a.g;var b;a.la?(b=Pf(a),b=a.g.Cc(Nf(a),b)):b=a.g.Fc();this.Rc=b;a.oa?(b=Qf(a),a=a.g.Cc(Of(a),b)):a=a.g.Dc();this.tc=a}h=Yf.prototype;h.matches=function(a){return 0>=this.g.compare(this.Rc,a)&&0>=this.g.compare(a,this.tc)};h.F=function(a,b,c,d,e,f){this.matches(new F(b,c))||(c=H);return this.ee.F(a,b,c,d,e,f)};
h.za=function(a,b,c){b.J()&&(b=H);var d=b.mb(this.g),d=d.ga(H),e=this;b.P(L,function(a,b){e.matches(new F(a,b))||(d=d.U(a,H))});return this.ee.za(a,d,c)};h.ga=function(a){return a};h.Pa=function(){return!0};h.Tb=function(){return this.ee};function Zf(a){this.ta=new Yf(a);this.g=a.g;I(a.ya,"Only valid if limit has been set");this.pa=a.pa;this.Hb=!$f(a)}h=Zf.prototype;h.F=function(a,b,c,d,e,f){this.ta.matches(new F(b,c))||(c=H);return a.R(b).$(c)?a:a.Db()<this.pa?this.ta.Tb().F(a,b,c,d,e,f):ag(this,a,b,c,e,f)};
h.za=function(a,b,c){var d;if(b.J()||b.e())d=H.mb(this.g);else if(2*this.pa<b.Db()&&b.wc(this.g)){d=H.mb(this.g);b=this.Hb?b.Yb(this.ta.tc,this.g):b.Wb(this.ta.Rc,this.g);for(var e=0;0<b.Ra.length&&e<this.pa;){var f=M(b),g;if(g=this.Hb?0>=this.g.compare(this.ta.Rc,f):0>=this.g.compare(f,this.ta.tc))d=d.U(f.name,f.S),e++;else break}}else{d=b.mb(this.g);d=d.ga(H);var k,m,l;if(this.Hb){b=d.Xe(this.g);k=this.ta.tc;m=this.ta.Rc;var r=td(this.g);l=function(a,b){return r(b,a)}}else b=d.Vb(this.g),k=this.ta.Rc,
m=this.ta.tc,l=td(this.g);for(var e=0,x=!1;0<b.Ra.length;)f=M(b),!x&&0>=l(k,f)&&(x=!0),(g=x&&e<this.pa&&0>=l(f,m))?e++:d=d.U(f.name,H)}return this.ta.Tb().za(a,d,c)};h.ga=function(a){return a};h.Pa=function(){return!0};h.Tb=function(){return this.ta.Tb()};
function ag(a,b,c,d,e,f){var g;if(a.Hb){var k=td(a.g);g=function(a,b){return k(b,a)}}else g=td(a.g);I(b.Db()==a.pa,"");var m=new F(c,d),l=a.Hb?Od(b,a.g):Pd(b,a.g),r=a.ta.matches(m);if(b.Fa(c)){for(var x=b.R(c),l=e.ce(a.g,l,a.Hb);null!=l&&(l.name==c||b.Fa(l.name));)l=e.ce(a.g,l,a.Hb);e=null==l?1:g(l,m);if(r&&!d.e()&&0<=e)return null!=f&&tf(f,new V("child_changed",d,c,x)),b.U(c,d);null!=f&&tf(f,new V("child_removed",x,c));b=b.U(c,H);return null!=l&&a.ta.matches(l)?(null!=f&&tf(f,new V("child_added",
l.S,l.name)),b.U(l.name,l.S)):b}return d.e()?b:r&&0<=g(l,m)?(null!=f&&(tf(f,new V("child_removed",l.S,l.name)),tf(f,new V("child_added",d,c))),b.U(c,d).U(l.name,H)):b};function bg(){this.Qb=this.oa=this.Jb=this.la=this.ya=!1;this.pa=0;this.lc="";this.cc=null;this.yb="";this.$b=null;this.wb="";this.g=L}var cg=new bg;function $f(a){return""===a.lc?a.la:"l"===a.lc}function Nf(a){I(a.la,"Only valid if start has been set");return a.cc}function Pf(a){I(a.la,"Only valid if start has been set");return a.Jb?a.yb:"[MIN_NAME]"}function Of(a){I(a.oa,"Only valid if end has been set");return a.$b}
function Qf(a){I(a.oa,"Only valid if end has been set");return a.Qb?a.wb:"[MAX_NAME]"}function dg(a){var b=new bg;b.ya=a.ya;b.pa=a.pa;b.la=a.la;b.cc=a.cc;b.Jb=a.Jb;b.yb=a.yb;b.oa=a.oa;b.$b=a.$b;b.Qb=a.Qb;b.wb=a.wb;b.g=a.g;return b}h=bg.prototype;h.ke=function(a){var b=dg(this);b.ya=!0;b.pa=a;b.lc="l";return b};h.le=function(a){var b=dg(this);b.ya=!0;b.pa=a;b.lc="r";return b};h.Kd=function(a,b){var c=dg(this);c.la=!0;p(a)||(a=null);c.cc=a;null!=b?(c.Jb=!0,c.yb=b):(c.Jb=!1,c.yb="");return c};
h.cd=function(a,b){var c=dg(this);c.oa=!0;p(a)||(a=null);c.$b=a;p(b)?(c.Qb=!0,c.wb=b):(c.Kg=!1,c.wb="");return c};function Vf(a,b){var c=dg(a);c.g=b;return c}function Wf(a){var b={};a.la&&(b.sp=a.cc,a.Jb&&(b.sn=a.yb));a.oa&&(b.ep=a.$b,a.Qb&&(b.en=a.wb));if(a.ya){b.l=a.pa;var c=a.lc;""===c&&(c=$f(a)?"l":"r");b.vf=c}a.g!==L&&(b.i=a.g.toString());return b}function X(a){return!(a.la||a.oa||a.ya)}function od(a){return X(a)&&a.g==L}
function pd(a){var b={};if(od(a))return b;var c;a.g===L?c="$priority":a.g===Cd?c="$value":a.g===zd?c="$key":(I(a.g instanceof vd,"Unrecognized index type!"),c=a.g.toString());b.orderBy=z(c);a.la&&(b.startAt=z(a.cc),a.Jb&&(b.startAt+=","+z(a.yb)));a.oa&&(b.endAt=z(a.$b),a.Qb&&(b.endAt+=","+z(a.wb)));a.ya&&($f(a)?b.limitToFirst=a.pa:b.limitToLast=a.pa);return b}h.toString=function(){return z(Wf(this))};function eg(a,b){this.O=a;this.Id=b}function fg(a,b,c,d){return new eg(new lf(b,c,d),a.Id)}function gg(a){return a.O.ea?a.O.j():null}eg.prototype.w=function(){return this.Id};function xf(a){return a.Id.ea?a.Id.j():null};function hg(a,b){this.Od=a;this.Lf=b}function ig(a){this.V=a}
ig.prototype.fb=function(a,b,c,d){var e=new sf,f;if(b.type===Sb)b.source.be?c=jg(this,a,b.path,b.Ia,c,d,e):(I(b.source.Te,"Unknown source."),f=b.source.Ce||nf(a.w())&&!b.path.e(),c=kg(this,a,b.path,b.Ia,c,d,f,e));else if(b.type===kd)b.source.be?c=lg(this,a,b.path,b.children,c,d,e):(I(b.source.Te,"Unknown source."),f=b.source.Ce||nf(a.w()),c=mg(this,a,b.path,b.children,c,d,f,e));else if(b.type===Je)if(b.Gd)if(b=b.path,null!=c.jc(b))c=a;else{f=new wf(c,a,d);d=a.O.j();if(b.e()||".priority"===O(b))mf(a.w())?
b=c.Ba(xf(a)):(b=a.w().j(),I(b instanceof P,"serverChildren would be complete if leaf node"),b=c.pc(b)),b=this.V.za(d,b,e);else{var g=O(b),k=c.oc(g,a.w());null==k&&pf(a.w(),g)&&(k=d.R(g));b=null!=k?this.V.F(d,g,k,E(b),f,e):a.O.j().Fa(g)?this.V.F(d,g,H,E(b),f,e):d;b.e()&&mf(a.w())&&(d=c.Ba(xf(a)),d.J()&&(b=this.V.za(b,d,e)))}d=mf(a.w())||null!=c.jc(D);c=fg(a,b,d,this.V.Pa())}else c=ng(this,a,b.path,b.Nb,c,d,e);else if(b.type===Qb)d=b.path,b=a.w(),f=b.j(),g=b.ea||d.e(),c=og(this,new eg(a.O,new lf(f,
g,b.Rb)),d,c,vf,e);else throw Lc("Unknown operation type: "+b.type);e=ya(e.gb);d=c;b=d.O;b.ea&&(f=b.j().J()||b.j().e(),g=gg(a),(0<e.length||!a.O.ea||f&&!b.j().$(g)||!b.j().C().$(g.C()))&&e.push(qf(gg(d))));return new hg(c,e)};
function og(a,b,c,d,e,f){var g=b.O;if(null!=d.jc(c))return b;var k;if(c.e())I(mf(b.w()),"If change path is empty, we must have complete server data"),nf(b.w())?(e=xf(b),d=d.pc(e instanceof P?e:H)):d=d.Ba(xf(b)),f=a.V.za(b.O.j(),d,f);else{var m=O(c);if(".priority"==m)I(1==Kd(c),"Can't have a priority with additional path components"),f=g.j(),k=b.w().j(),d=d.Xc(c,f,k),f=null!=d?a.V.ga(f,d):g.j();else{var l=E(c);pf(g,m)?(k=b.w().j(),d=d.Xc(c,g.j(),k),d=null!=d?g.j().R(m).F(l,d):g.j().R(m)):d=d.oc(m,
b.w());f=null!=d?a.V.F(g.j(),m,d,l,e,f):g.j()}}return fg(b,f,g.ea||c.e(),a.V.Pa())}function kg(a,b,c,d,e,f,g,k){var m=b.w();g=g?a.V:a.V.Tb();if(c.e())d=g.za(m.j(),d,null);else if(g.Pa()&&!m.Rb)d=m.j().F(c,d),d=g.za(m.j(),d,null);else{var l=O(c);if(!of(m,c)&&1<Kd(c))return b;var r=E(c);d=m.j().R(l).F(r,d);d=".priority"==l?g.ga(m.j(),d):g.F(m.j(),l,d,r,vf,null)}m=m.ea||c.e();b=new eg(b.O,new lf(d,m,g.Pa()));return og(a,b,c,e,new wf(e,b,f),k)}
function jg(a,b,c,d,e,f,g){var k=b.O;e=new wf(e,b,f);if(c.e())g=a.V.za(b.O.j(),d,g),a=fg(b,g,!0,a.V.Pa());else if(f=O(c),".priority"===f)g=a.V.ga(b.O.j(),d),a=fg(b,g,k.ea,k.Rb);else{c=E(c);var m=k.j().R(f);if(!c.e()){var l=e.Ue(f);d=null!=l?".priority"===$d(c)&&l.Q(c.parent()).e()?l:l.F(c,d):H}m.$(d)?a=b:(g=a.V.F(k.j(),f,d,c,e,g),a=fg(b,g,k.ea,a.V.Pa()))}return a}
function lg(a,b,c,d,e,f,g){var k=b;xe(d,function(d,l){var r=c.m(d);pf(b.O,O(r))&&(k=jg(a,k,r,l,e,f,g))});xe(d,function(d,l){var r=c.m(d);pf(b.O,O(r))||(k=jg(a,k,r,l,e,f,g))});return k}function pg(a,b){xe(b,function(b,d){a=a.F(b,d)});return a}
function mg(a,b,c,d,e,f,g,k){if(b.w().j().e()&&!mf(b.w()))return b;var m=b;c=c.e()?d:qe(S,c,d);var l=b.w().j();c.children.ia(function(c,d){if(l.Fa(c)){var G=b.w().j().R(c),G=pg(G,d);m=kg(a,m,new J(c),G,e,f,g,k)}});c.children.ia(function(c,d){var G=!pf(b.w(),c)&&null==d.value;l.Fa(c)||G||(G=b.w().j().R(c),G=pg(G,d),m=kg(a,m,new J(c),G,e,f,g,k))});return m}
function ng(a,b,c,d,e,f,g){if(null!=e.jc(c))return b;var k=nf(b.w()),m=b.w();if(null!=d.value){if(c.e()&&m.ea||of(m,c))return kg(a,b,c,m.j().Q(c),e,f,k,g);if(c.e()){var l=S;m.j().P(zd,function(a,b){l=l.set(new J(a),b)});return mg(a,b,c,l,e,f,k,g)}return b}l=S;xe(d,function(a){var b=c.m(a);of(m,b)&&(l=l.set(a,m.j().Q(b)))});return mg(a,b,c,l,e,f,k,g)};function qg(a,b){this.W=a;var c=a.n,d=new Xf(c.g),c=X(c)?new Xf(c.g):c.ya?new Zf(c):new Yf(c);this.mf=new ig(c);var e=b.w(),f=b.O,g=d.za(H,e.j(),null),k=c.za(H,f.j(),null);this.Ma=new eg(new lf(k,f.ea,c.Pa()),new lf(g,e.ea,d.Pa()));this.$a=[];this.Sf=new Af(a)}function rg(a){return a.W}h=qg.prototype;h.w=function(){return this.Ma.w().j()};h.hb=function(a){var b=xf(this.Ma);return b&&(X(this.W.n)||!a.e()&&!b.R(O(a)).e())?b.Q(a):null};h.e=function(){return 0===this.$a.length};h.Mb=function(a){this.$a.push(a)};
h.kb=function(a,b){var c=[];if(b){I(null==a,"A cancel should cancel all event registrations.");var d=this.W.path;Ga(this.$a,function(a){(a=a.Me(b,d))&&c.push(a)})}if(a){for(var e=[],f=0;f<this.$a.length;++f){var g=this.$a[f];if(!g.matches(a))e.push(g);else if(a.Ye()){e=e.concat(this.$a.slice(f+1));break}}this.$a=e}else this.$a=[];return c};
h.fb=function(a,b,c){a.type===kd&&null!==a.source.Gb&&(I(xf(this.Ma),"We should always have a full cache before handling merges"),I(gg(this.Ma),"Missing event cache, even though we have a server cache"));var d=this.Ma;a=this.mf.fb(d,a,b,c);b=this.mf;c=a.Od;I(c.O.j().wc(b.V.g),"Event snap not indexed");I(c.w().j().wc(b.V.g),"Server snap not indexed");I(mf(a.Od.w())||!mf(d.w()),"Once a server snap is complete, it should never go back");this.Ma=a.Od;return sg(this,a.Lf,a.Od.O.j(),null)};
function tg(a,b){var c=a.Ma.O,d=[];c.j().J()||c.j().P(L,function(a,b){d.push(new V("child_added",b,a))});c.ea&&d.push(qf(c.j()));return sg(a,d,c.j(),b)}function sg(a,b,c,d){return Bf(a.Sf,b,c,d?[d]:a.$a)};function ug(){this.Aa={}}h=ug.prototype;h.e=function(){return Da(this.Aa)};h.fb=function(a,b,c){var d=a.source.Gb;if(null!==d)return d=A(this.Aa,d),I(null!=d,"SyncTree gave us an op for an invalid query."),d.fb(a,b,c);var e=[];v(this.Aa,function(d){e=e.concat(d.fb(a,b,c))});return e};h.Mb=function(a,b,c,d,e){var f=a.ka(),g=A(this.Aa,f);if(!g){var g=c.Ba(e?d:null),k=!1;g?k=!0:(g=d instanceof P?c.pc(d):H,k=!1);g=new qg(a,new eg(new lf(g,k,!1),new lf(d,e,!1)));this.Aa[f]=g}g.Mb(b);return tg(g,b)};
h.kb=function(a,b,c){var d=a.ka(),e=[],f=[],g=null!=vg(this);if("default"===d){var k=this;v(this.Aa,function(a,d){f=f.concat(a.kb(b,c));a.e()&&(delete k.Aa[d],X(a.W.n)||e.push(a.W))})}else{var m=A(this.Aa,d);m&&(f=f.concat(m.kb(b,c)),m.e()&&(delete this.Aa[d],X(m.W.n)||e.push(m.W)))}g&&null==vg(this)&&e.push(new R(a.u,a.path));return{sg:e,Tf:f}};function wg(a){return Ha(ya(a.Aa),function(a){return!X(a.W.n)})}h.hb=function(a){var b=null;v(this.Aa,function(c){b=b||c.hb(a)});return b};
function xg(a,b){if(X(b.n))return vg(a);var c=b.ka();return A(a.Aa,c)}function vg(a){return Ca(a.Aa,function(a){return X(a.W.n)})||null};function yg(){this.T=Be;this.ma=[];this.zc=-1}function zg(a,b){for(var c=0;c<a.ma.length;c++){var d=a.ma[c];if(d.Wc===b)return d}return null}h=yg.prototype;
h.Cd=function(a){var b=Ma(this.ma,function(b){return b.Wc===a});I(0<=b,"removeWrite called with nonexistent writeId.");var c=this.ma[b];this.ma.splice(b,1);for(var d=c.visible,e=!1,f=this.ma.length-1;d&&0<=f;){var g=this.ma[f];g.visible&&(f>=b&&Ag(g,c.path)?d=!1:c.path.contains(g.path)&&(e=!0));f--}if(d){if(e)this.T=Bg(this.ma,Cg,D),this.zc=0<this.ma.length?this.ma[this.ma.length-1].Wc:-1;else if(c.Ia)this.T=this.T.Cd(c.path);else{var k=this;v(c.children,function(a,b){k.T=k.T.Cd(c.path.m(b))})}return!0}return!1};
h.Ba=function(a,b,c,d){if(c||d){var e=Ge(this.T,a);return!d&&e.e()?b:d||null!=b||null!=Ee(e,D)?(e=Bg(this.ma,function(b){return(b.visible||d)&&(!c||!(0<=Fa(c,b.Wc)))&&(b.path.contains(a)||a.contains(b.path))},a),b=b||H,e.apply(b)):null}e=Ee(this.T,a);if(null!=e)return e;e=Ge(this.T,a);return e.e()?b:null!=b||null!=Ee(e,D)?(b=b||H,e.apply(b)):null};
h.pc=function(a,b){var c=H,d=Ee(this.T,a);if(d)d.J()||d.P(L,function(a,b){c=c.U(a,b)});else if(b){var e=Ge(this.T,a);b.P(L,function(a,b){var d=Ge(e,new J(a)).apply(b);c=c.U(a,d)});Ga(Fe(e),function(a){c=c.U(a.name,a.S)})}else e=Ge(this.T,a),Ga(Fe(e),function(a){c=c.U(a.name,a.S)});return c};h.Xc=function(a,b,c,d){I(c||d,"Either existingEventSnap or existingServerSnap must exist");a=a.m(b);if(null!=Ee(this.T,a))return null;a=Ge(this.T,a);return a.e()?d.Q(b):a.apply(d.Q(b))};
h.oc=function(a,b,c){a=a.m(b);var d=Ee(this.T,a);return null!=d?d:pf(c,b)?Ge(this.T,a).apply(c.j().R(b)):null};h.jc=function(a){return Ee(this.T,a)};h.Td=function(a,b,c,d,e,f){var g;a=Ge(this.T,a);g=Ee(a,D);if(null==g)if(null!=b)g=a.apply(b);else return[];g=g.mb(f);if(g.e()||g.J())return[];b=[];a=td(f);e=e?g.Yb(c,f):g.Wb(c,f);for(f=M(e);f&&b.length<d;)0!==a(f,c)&&b.push(f),f=M(e);return b};
function Ag(a,b){return a.Ia?a.path.contains(b):!!Ba(a.children,function(c,d){return a.path.m(d).contains(b)})}function Cg(a){return a.visible}
function Bg(a,b,c){for(var d=Be,e=0;e<a.length;++e){var f=a[e];if(b(f)){var g=f.path;if(f.Ia)c.contains(g)?(g=Q(c,g),d=Ce(d,g,f.Ia)):g.contains(c)&&(g=Q(g,c),d=Ce(d,D,f.Ia.Q(g)));else if(f.children)if(c.contains(g))g=Q(c,g),d=De(d,g,f.children);else{if(g.contains(c))if(g=Q(g,c),g.e())d=De(d,D,f.children);else if(f=A(f.children,O(g)))f=f.Q(E(g)),d=Ce(d,D,f)}else throw Lc("WriteRecord should have .snap or .children");}}return d}function Dg(a,b){this.Kb=a;this.X=b}h=Dg.prototype;
h.Ba=function(a,b,c){return this.X.Ba(this.Kb,a,b,c)};h.pc=function(a){return this.X.pc(this.Kb,a)};h.Xc=function(a,b,c){return this.X.Xc(this.Kb,a,b,c)};h.jc=function(a){return this.X.jc(this.Kb.m(a))};h.Td=function(a,b,c,d,e){return this.X.Td(this.Kb,a,b,c,d,e)};h.oc=function(a,b){return this.X.oc(this.Kb,a,b)};h.m=function(a){return new Dg(this.Kb.m(a),this.X)};function Eg(a){this.xa=S;this.jb=new yg;this.Be={};this.gc={};this.Ac=a}function Fg(a,b,c,d,e){var f=a.jb,g=e;I(d>f.zc,"Stacking an older write on top of newer ones");p(g)||(g=!0);f.ma.push({path:b,Ia:c,Wc:d,visible:g});g&&(f.T=Ce(f.T,b,c));f.zc=d;return e?Gg(a,new Rb(Ke,b,c)):[]}function Hg(a,b,c,d){var e=a.jb;I(d>e.zc,"Stacking an older merge on top of newer ones");e.ma.push({path:b,children:c,Wc:d,visible:!0});e.T=De(e.T,b,c);e.zc=d;c=ne(c);return Gg(a,new jd(Ke,b,c))}
function Ig(a,b,c){c=c||!1;var d=zg(a.jb,b);if(a.jb.Cd(b)){var e=S;null!=d.Ia?e=e.set(D,!0):Bb(d.children,function(a,b){e=e.set(new J(a),b)});return Gg(a,new Ie(d.path,e,c))}return[]}function Jg(a,b,c){c=ne(c);return Gg(a,new jd(Me,b,c))}function Kg(a,b,c,d){d=Lg(a,d);if(null!=d){var e=Mg(d);d=e.path;e=e.Gb;b=Q(d,b);c=new Rb(new Le(!1,!0,e,!0),b,c);return Ng(a,d,c)}return[]}
function Og(a,b,c,d){if(d=Lg(a,d)){var e=Mg(d);d=e.path;e=e.Gb;b=Q(d,b);c=ne(c);c=new jd(new Le(!1,!0,e,!0),b,c);return Ng(a,d,c)}return[]}
Eg.prototype.Mb=function(a,b){var c=a.path,d=null,e=!1;ve(this.xa,c,function(a,b){var f=Q(a,c);d=d||b.hb(f);e=e||null!=vg(b)});var f=this.xa.get(c);f?(e=e||null!=vg(f),d=d||f.hb(D)):(f=new ug,this.xa=this.xa.set(c,f));var g;null!=d?g=!0:(g=!1,d=H,ze(this.xa.subtree(c),function(a,b){var c=b.hb(D);c&&(d=d.U(a,c))}));var k=null!=xg(f,a);if(!k&&!X(a.n)){var m=Pg(a);I(!(m in this.gc),"View does not exist, but we have a tag");var l=Qg++;this.gc[m]=l;this.Be["_"+l]=m}g=f.Mb(a,b,new Dg(c,this.jb),d,g);k||
e||(f=xg(f,a),g=g.concat(Rg(this,a,f)));return g};
Eg.prototype.kb=function(a,b,c){var d=a.path,e=this.xa.get(d),f=[];if(e&&("default"===a.ka()||null!=xg(e,a))){f=e.kb(a,b,c);e.e()&&(this.xa=this.xa.remove(d));e=f.sg;f=f.Tf;b=-1!==Ma(e,function(a){return X(a.n)});var g=te(this.xa,d,function(a,b){return null!=vg(b)});if(b&&!g&&(d=this.xa.subtree(d),!d.e()))for(var d=Sg(d),k=0;k<d.length;++k){var m=d[k],l=m.W,m=Tg(this,m);this.Ac.ye(Ug(l),Vg(this,l),m.hd,m.G)}if(!g&&0<e.length&&!c)if(b)this.Ac.Ld(Ug(a),null);else{var r=this;Ga(e,function(a){a.ka();
var b=r.gc[Pg(a)];r.Ac.Ld(Ug(a),b)})}Wg(this,e)}return f};Eg.prototype.Ba=function(a,b){var c=this.jb,d=te(this.xa,a,function(b,c){var d=Q(b,a);if(d=c.hb(d))return d});return c.Ba(a,d,b,!0)};function Sg(a){return re(a,function(a,c,d){if(c&&null!=vg(c))return[vg(c)];var e=[];c&&(e=wg(c));v(d,function(a){e=e.concat(a)});return e})}function Wg(a,b){for(var c=0;c<b.length;++c){var d=b[c];if(!X(d.n)){var d=Pg(d),e=a.gc[d];delete a.gc[d];delete a.Be["_"+e]}}}
function Ug(a){return X(a.n)&&!od(a.n)?a.vb():a}function Rg(a,b,c){var d=b.path,e=Vg(a,b);c=Tg(a,c);b=a.Ac.ye(Ug(b),e,c.hd,c.G);d=a.xa.subtree(d);if(e)I(null==vg(d.value),"If we're adding a query, it shouldn't be shadowed");else for(e=re(d,function(a,b,c){if(!a.e()&&b&&null!=vg(b))return[rg(vg(b))];var d=[];b&&(d=d.concat(Ia(wg(b),function(a){return a.W})));v(c,function(a){d=d.concat(a)});return d}),d=0;d<e.length;++d)c=e[d],a.Ac.Ld(Ug(c),Vg(a,c));return b}
function Tg(a,b){var c=b.W,d=Vg(a,c);return{hd:function(){return(b.w()||H).hash()},G:function(b){if("ok"===b){if(d){var f=c.path;if(b=Lg(a,d)){var g=Mg(b);b=g.path;g=g.Gb;f=Q(b,f);f=new Pb(new Le(!1,!0,g,!0),f);b=Ng(a,b,f)}else b=[]}else b=Gg(a,new Pb(Me,c.path));return b}f="Unknown Error";"too_big"===b?f="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==b?f="Client doesn't have permission to access the desired data.":"unavailable"==b&&
(f="The service is unavailable");f=Error(b+" at "+c.path.toString()+": "+f);f.code=b.toUpperCase();return a.kb(c,null,f)}}}function Pg(a){return a.path.toString()+"$"+a.ka()}function Mg(a){var b=a.indexOf("$");I(-1!==b&&b<a.length-1,"Bad queryKey.");return{Gb:a.substr(b+1),path:new J(a.substr(0,b))}}function Lg(a,b){var c=a.Be,d="_"+b;return d in c?c[d]:void 0}function Vg(a,b){var c=Pg(b);return A(a.gc,c)}var Qg=1;
function Ng(a,b,c){var d=a.xa.get(b);I(d,"Missing sync point for query tag that we're tracking");return d.fb(c,new Dg(b,a.jb),null)}function Gg(a,b){return Xg(a,b,a.xa,null,new Dg(D,a.jb))}function Xg(a,b,c,d,e){if(b.path.e())return Yg(a,b,c,d,e);var f=c.get(D);null==d&&null!=f&&(d=f.hb(D));var g=[],k=O(b.path),m=b.Kc(k);if((c=c.children.get(k))&&m)var l=d?d.R(k):null,k=e.m(k),g=g.concat(Xg(a,m,c,l,k));f&&(g=g.concat(f.fb(b,e,d)));return g}
function Yg(a,b,c,d,e){var f=c.get(D);null==d&&null!=f&&(d=f.hb(D));var g=[];c.children.ia(function(c,f){var l=d?d.R(c):null,r=e.m(c),x=b.Kc(c);x&&(g=g.concat(Yg(a,x,f,l,r)))});f&&(g=g.concat(f.fb(b,e,d)));return g};function Zg(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test("undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:"")};function $g(){Wd.call(this,["online"]);this.fc=!0;if("undefined"!==typeof window&&"undefined"!==typeof window.addEventListener&&!Zg()){var a=this;window.addEventListener("online",function(){a.fc||(a.fc=!0,a.Ee("online",!0))},!1);window.addEventListener("offline",function(){a.fc&&(a.fc=!1,a.Ee("online",!1))},!1)}}ja($g,Wd);$g.prototype.Ve=function(a){I("online"===a,"Unknown event type: "+a);return[this.fc]};ba($g);var nc="websocket",oc="long_polling";function ah(a){this.re=a;this.zd=[];this.Pb=0;this.Ud=-1;this.Eb=null}function bh(a,b,c){a.Ud=b;a.Eb=c;a.Ud<a.Pb&&(a.Eb(),a.Eb=null)}function ch(a,b,c){for(a.zd[b]=c;a.zd[a.Pb];){var d=a.zd[a.Pb];delete a.zd[a.Pb];for(var e=0;e<d.length;++e)if(d[e]){var f=a;ed(function(){f.re(d[e])})}if(a.Pb===a.Ud){a.Eb&&(clearTimeout(a.Eb),a.Eb(),a.Eb=null);break}a.Pb++}};function dh(a,b,c,d){this.Vd=a;this.f=Sc(a);this.hc=b;this.ob=this.pb=0;this.Wa=dc(b);this.Af=c;this.uc=!1;this.Bb=d;this.Vc=function(a){return mc(b,oc,a)}}var eh,fh;
dh.prototype.open=function(a,b){this.Ne=0;this.ja=b;this.ef=new ah(a);this.zb=!1;var c=this;this.rb=setTimeout(function(){c.f("Timed out trying to connect.");c.eb();c.rb=null},Math.floor(3E4));Xc(function(){if(!c.zb){c.Va=new gh(function(a,b,d,k,m){hh(c,arguments);if(c.Va)if(c.rb&&(clearTimeout(c.rb),c.rb=null),c.uc=!0,"start"==a)c.id=b,c.og=d;else if("close"===a)b?(c.Va.wf=!1,bh(c.ef,b,function(){c.eb()})):c.eb();else throw Error("Unrecognized command received: "+a);},function(a,b){hh(c,arguments);
ch(c.ef,a,b)},function(){c.eb()},c.Vc);var a={start:"t"};a.ser=Math.floor(1E8*Math.random());c.Va.Cg&&(a.cb=c.Va.Cg);a.v="5";c.Af&&(a.s=c.Af);c.Bb&&(a.ls=c.Bb);a=c.Vc(a);c.f("Connecting via long-poll to "+a);ih(c.Va,a,function(){})}})};dh.prototype.start=function(){var a=this.Va,b=this.og;a.me=this.id;a.df=b;for(a.Qd=!0;jh(a););};
dh.isAvailable=function(){return eh||!fh&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.Eg)&&!1};h=dh.prototype;h.pd=function(){};h.Qc=function(){this.zb=!0;this.Va&&(this.Va.close(),this.Va=null);this.cf&&(document.body.removeChild(this.cf),this.cf=null);this.rb&&(clearTimeout(this.rb),this.rb=null)};
h.eb=function(){this.zb||(this.f("Longpoll is closing itself"),this.Qc(),this.ja&&(this.ja(this.uc),this.ja=null))};h.close=function(){this.zb||(this.f("Longpoll is being closed."),this.Qc())};h.send=function(a){a=z(a);this.pb+=a.length;Zb(this.Wa,"bytes_sent",a.length);a=Gb(a);a=wb(a,!0);a=ad(a,1840);for(var b=0;b<a.length;b++){var c=this.Va;c.Nc.push({ug:this.Ne,Bg:a.length,Pe:a[b]});c.Qd&&jh(c);this.Ne++}};function hh(a,b){var c=z(b).length;a.ob+=c;Zb(a.Wa,"bytes_received",c)}
function gh(a,b,c,d){this.Vc=d;this.ib=c;this.te=new Ud;this.Nc=[];this.Xd=Math.floor(1E8*Math.random());this.wf=!0;this.Nf=a;this.gg=b}gh.prototype.close=function(){this.Qd=!1;if(this.rd){this.rd.Gg.body.innerHTML="";var a=this;setTimeout(function(){null!==a.rd&&(document.body.removeChild(a.rd),a.rd=null)},Math.floor(0))}if(this.me){var b={disconn:"t"};b.id=this.me;b.pw=this.df;b=this.Vc(b);kh(b)}if(b=this.ib)this.ib=null,b()};
function jh(a){if(a.Qd&&a.wf&&a.te.count()<(0<a.Nc.length?2:1)){a.Xd++;var b={};b.id=a.me;b.pw=a.df;b.ser=a.Xd;for(var b=a.Vc(b),c="",d=0;0<a.Nc.length;)if(1870>=a.Nc[0].Pe.length+30+c.length){var e=a.Nc.shift(),c=c+"&seg"+d+"="+e.ug+"&ts"+d+"="+e.Bg+"&d"+d+"="+e.Pe;d++}else break;lh(a,b+c,a.Xd);return!0}return!1}function lh(a,b,c){function d(){a.te.remove(c);jh(a)}a.te.add(c,1);var e=setTimeout(d,Math.floor(25E3));ih(a,b,function(){clearTimeout(e);d()})}function ih(a,b,c){mh(a,b,c)}var nh=null;
function kh(a,b){nh||(nh=require("request"));nh(a,function(c,d,e){if(c)throw"Rest request for "+a.url+" failed.";b&&b(e)})}function mh(a,b,c){kh({url:b,Hg:!0},function(b){oh(a,b);c()})}function oh(a,b){eval("var jsonpCB = function(pLPCommand, pRTLPCB) {"+b+"}");jsonpCB(a.Nf,a.gg)};var ph=null,ph=require("faye-websocket").Client;function qh(a,b,c,d){this.Vd=a;this.f=Sc(this.Vd);this.frames=this.xc=null;this.ob=this.pb=this.De=0;this.Wa=dc(b);a={v:"5"};c&&(a.s=c);d&&(a.ls=d);this.Wd=mc(b,nc,a)}var rh;
qh.prototype.open=function(a,b){this.ib=b;this.fg=a;this.f("Websocket connecting to "+this.Wd);this.uc=!1;ic.set("previous_websocket_failure",!0);try{var c={headers:{"User-Agent":"Firebase/5/"+firebase.SDK_VERSION+"/"+process.platform+"/Node"}},d=process.env,e=0==this.Wd.indexOf("wss://")?d.HTTPS_PROXY||d.https_proxy:d.HTTP_PROXY||d.http_proxy;e&&(c.proxy={origin:e});this.Ka=new ph(this.Wd,[],c)}catch(f){this.f("Error instantiating WebSocket.");(c=f.message||f.data)&&this.f(c);this.eb();return}var g=
this;this.Ka.onopen=function(){g.f("Websocket connected.");g.uc=!0};this.Ka.onclose=function(){g.f("Websocket connection was disconnected.");g.Ka=null;g.eb()};this.Ka.onmessage=function(a){if(null!==g.Ka)if(a=a.data,g.ob+=a.length,Zb(g.Wa,"bytes_received",a.length),sh(g),null!==g.frames)th(g,a);else{a:{I(null===g.frames,"We already have a frame buffer");if(6>=a.length){var b=Number(a);if(!isNaN(b)){g.De=b;g.frames=[];a=null;break a}}g.De=1;g.frames=[]}null!==a&&th(g,a)}};this.Ka.onerror=function(a){g.f("WebSocket error.  Closing connection.");
(a=a.message||a.data)&&g.f(a);g.eb()}};qh.prototype.start=function(){};qh.isAvailable=function(){var a=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var b=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);b&&1<b.length&&4.4>parseFloat(b[1])&&(a=!0)}return!a&&null!==ph&&!rh};qh.responsesRequiredToBeHealthy=2;qh.healthyTimeout=3E4;h=qh.prototype;h.pd=function(){ic.remove("previous_websocket_failure")};
function th(a,b){a.frames.push(b);if(a.frames.length==a.De){var c=a.frames.join("");a.frames=null;c=zb(c);a.fg(c)}}h.send=function(a){sh(this);a=z(a);this.pb+=a.length;Zb(this.Wa,"bytes_sent",a.length);a=ad(a,16384);1<a.length&&uh(this,String(a.length));for(var b=0;b<a.length;b++)uh(this,a[b])};h.Qc=function(){this.zb=!0;this.xc&&(clearInterval(this.xc),this.xc=null);this.Ka&&(this.Ka.close(),this.Ka=null)};
h.eb=function(){this.zb||(this.f("WebSocket is closing itself"),this.Qc(),this.ib&&(this.ib(this.uc),this.ib=null))};h.close=function(){this.zb||(this.f("WebSocket is being closed"),this.Qc())};function sh(a){clearInterval(a.xc);a.xc=setInterval(function(){a.Ka&&uh(a,"0");sh(a)},Math.floor(45E3))}function uh(a,b){try{a.Ka.send(b)}catch(c){a.f("Exception thrown from WebSocket.send():",c.message||c.data,"Closing connection."),setTimeout(u(a.eb,a),0)}};function vh(a){wh(this,a)}var xh=[dh,qh];function wh(a,b){var c=qh&&qh.isAvailable(),d=c&&!(ic.$e||!0===ic.get("previous_websocket_failure"));b.Dg&&(c||N("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),d=!0);if(d)a.Tc=[qh];else{var e=a.Tc=[];bd(xh,function(a,b){b&&b.isAvailable()&&e.push(b)})}}function yh(a){if(0<a.Tc.length)return a.Tc[0];throw Error("No transports available");};function zh(a,b,c,d,e,f,g){this.id=a;this.f=Sc("c:"+this.id+":");this.re=c;this.Jc=d;this.ja=e;this.qe=f;this.M=b;this.yd=[];this.Le=0;this.zf=new vh(b);this.L=0;this.Bb=g;this.f("Connection created");Ah(this)}
function Ah(a){var b=yh(a.zf);a.I=new b("c:"+a.id+":"+a.Le++,a.M,void 0,a.Bb);a.ve=b.responsesRequiredToBeHealthy||0;var c=Bh(a,a.I),d=Ch(a,a.I);a.Uc=a.I;a.Oc=a.I;a.D=null;a.Ab=!1;setTimeout(function(){a.I&&a.I.open(c,d)},Math.floor(0));b=b.healthyTimeout||0;0<b&&(a.jd=setTimeout(function(){a.jd=null;a.Ab||(a.I&&102400<a.I.ob?(a.f("Connection exceeded healthy timeout but has received "+a.I.ob+" bytes.  Marking connection healthy."),a.Ab=!0,a.I.pd()):a.I&&10240<a.I.pb?a.f("Connection exceeded healthy timeout but has sent "+
a.I.pb+" bytes.  Leaving connection alive."):(a.f("Closing unhealthy connection after timeout."),a.close()))},Math.floor(b)))}function Ch(a,b){return function(c){b===a.I?(a.I=null,c||0!==a.L?1===a.L&&a.f("Realtime connection lost."):(a.f("Realtime connection failed."),"s-"===a.M.ab.substr(0,2)&&(ic.remove("host:"+a.M.host),a.M.ab=a.M.host)),a.close()):b===a.D?(a.f("Secondary connection lost."),c=a.D,a.D=null,a.Uc!==c&&a.Oc!==c||a.close()):a.f("closing an old connection")}}
function Bh(a,b){return function(c){if(2!=a.L)if(b===a.Oc){var d=Zc("t",c);c=Zc("d",c);if("c"==d){if(d=Zc("t",c),"d"in c)if(c=c.d,"h"===d){var d=c.ts,e=c.v,f=c.h;a.xf=c.s;lc(a.M,f);0==a.L&&(a.I.start(),Dh(a,a.I,d),"5"!==e&&N("Protocol version mismatch detected"),c=a.zf,(c=1<c.Tc.length?c.Tc[1]:null)&&Eh(a,c))}else if("n"===d){a.f("recvd end transmission on primary");a.Oc=a.D;for(c=0;c<a.yd.length;++c)a.ud(a.yd[c]);a.yd=[];Fh(a)}else"s"===d?(a.f("Connection shutdown command received. Shutting down..."),
a.qe&&(a.qe(c),a.qe=null),a.ja=null,a.close()):"r"===d?(a.f("Reset packet received.  New host: "+c),lc(a.M,c),1===a.L?a.close():(Gh(a),Ah(a))):"e"===d?Tc("Server Error: "+c):"o"===d?(a.f("got pong on primary."),Hh(a),Ih(a)):Tc("Unknown control packet command: "+d)}else"d"==d&&a.ud(c)}else if(b===a.D)if(d=Zc("t",c),c=Zc("d",c),"c"==d)"t"in c&&(c=c.t,"a"===c?Jh(a):"r"===c?(a.f("Got a reset on secondary, closing it"),a.D.close(),a.Uc!==a.D&&a.Oc!==a.D||a.close()):"o"===c&&(a.f("got pong on secondary."),
a.uf--,Jh(a)));else if("d"==d)a.yd.push(c);else throw Error("Unknown protocol layer: "+d);else a.f("message on old connection")}}zh.prototype.va=function(a){Kh(this,{t:"d",d:a})};function Fh(a){a.Uc===a.D&&a.Oc===a.D&&(a.f("cleaning up and promoting a connection: "+a.D.Vd),a.I=a.D,a.D=null)}
function Jh(a){0>=a.uf?(a.f("Secondary connection is healthy."),a.Ab=!0,a.D.pd(),a.D.start(),a.f("sending client ack on secondary"),a.D.send({t:"c",d:{t:"a",d:{}}}),a.f("Ending transmission on primary"),a.I.send({t:"c",d:{t:"n",d:{}}}),a.Uc=a.D,Fh(a)):(a.f("sending ping on secondary."),a.D.send({t:"c",d:{t:"p",d:{}}}))}zh.prototype.ud=function(a){Hh(this);this.re(a)};function Hh(a){a.Ab||(a.ve--,0>=a.ve&&(a.f("Primary connection is healthy."),a.Ab=!0,a.I.pd()))}
function Eh(a,b){a.D=new b("c:"+a.id+":"+a.Le++,a.M,a.xf);a.uf=b.responsesRequiredToBeHealthy||0;a.D.open(Bh(a,a.D),Ch(a,a.D));setTimeout(function(){a.D&&(a.f("Timed out trying to upgrade."),a.D.close())},Math.floor(6E4))}function Dh(a,b,c){a.f("Realtime connection established.");a.I=b;a.L=1;a.Jc&&(a.Jc(c,a.xf),a.Jc=null);0===a.ve?(a.f("Primary connection is healthy."),a.Ab=!0):setTimeout(function(){Ih(a)},Math.floor(5E3))}
function Ih(a){a.Ab||1!==a.L||(a.f("sending ping on primary."),Kh(a,{t:"c",d:{t:"p",d:{}}}))}function Kh(a,b){if(1!==a.L)throw"Connection is not connected";a.Uc.send(b)}zh.prototype.close=function(){2!==this.L&&(this.f("Closing realtime connection."),this.L=2,Gh(this),this.ja&&(this.ja(),this.ja=null))};function Gh(a){a.f("Shutting down all connections");a.I&&(a.I.close(),a.I=null);a.D&&(a.D.close(),a.D=null);a.jd&&(clearTimeout(a.jd),a.jd=null)};function Lh(a,b,c,d,e,f){this.id=Mh++;this.f=Sc("p:"+this.id+":");this.nd={};this.aa={};this.qa=[];this.Mc=0;this.Ic=[];this.na=!1;this.Ua=1E3;this.qd=3E5;this.Fb=b;this.Hc=c;this.se=d;this.M=a;this.nb=this.Ha=this.Bb=this.xe=null;this.Rd=e;this.ae=!1;this.he=0;this.He=f||null;this.tb=null;this.Lb=!1;this.Ed={};this.tg=0;this.Se=!0;this.yc=this.je=null;Nh(this,0);kf.Ub().ec("visible",this.ig,this);-1===a.host.indexOf("fblocal")&&$g.Ub().ec("online",this.hg,this)}var Mh=0,Oh=0;h=Lh.prototype;
h.va=function(a,b,c){var d=++this.tg;a={r:d,a:a,b:b};this.f(z(a));I(this.na,"sendRequest call when we're not connected not allowed.");this.Ha.va(a);c&&(this.Ed[d]=c)};h.af=function(a,b,c,d){var e=a.ka(),f=a.path.toString();this.f("Listen called for "+f+" "+e);this.aa[f]=this.aa[f]||{};I(od(a.n)||!X(a.n),"listen() called for non-default but complete query");I(!this.aa[f][e],"listen() called twice for same path/queryId.");a={G:d,hd:b,pg:a,tag:c};this.aa[f][e]=a;this.na&&Ph(this,a)};
function Ph(a,b){var c=b.pg,d=c.path.toString(),e=c.ka();a.f("Listen on "+d+" for "+e);var f={p:d};b.tag&&(f.q=Wf(c.n),f.t=b.tag);f.h=b.hd();a.va("q",f,function(f){var k=f.d,m=f.s;if(k&&"object"===typeof k&&Ab(k,"w")){var l=A(k,"w");da(l)&&0<=Fa(l,"no_index")&&N("Using an unspecified index. Consider adding "+('".indexOn": "'+c.n.g.toString()+'"')+" at "+c.path.toString()+" to your security rules for better performance")}(a.aa[d]&&a.aa[d][e])===b&&(a.f("listen response",f),"ok"!==m&&Qh(a,d,e),b.G&&
b.G(m,k))})}h.of=function(a){this.nb=a;this.f("Auth token refreshed");this.nb?Rh(this):this.na&&this.va("unauth",{},function(){});if(a&&40===a.length||id(a))this.f("Admin auth credential detected.  Reducing max reconnect time."),this.qd=3E4};function Rh(a){if(a.na&&a.nb){var b=a.nb,c=hd(b)?"auth":"gauth",d={cred:b};a.He&&(d.authvar=a.He);a.va(c,d,function(c){var d=c.s;c=c.d||"error";a.nb===b&&("ok"===d?this.he=0:Sh(a,d,c))})}}
h.Df=function(a,b){var c=a.path.toString(),d=a.ka();this.f("Unlisten called for "+c+" "+d);I(od(a.n)||!X(a.n),"unlisten() called for non-default but complete query");if(Qh(this,c,d)&&this.na){var e=Wf(a.n);this.f("Unlisten on "+c+" for "+d);c={p:c};b&&(c.q=e,c.t=b);this.va("n",c)}};h.pe=function(a,b,c){this.na?Th(this,"o",a,b,c):this.Ic.push({ue:a,action:"o",data:b,G:c})};h.ff=function(a,b,c){this.na?Th(this,"om",a,b,c):this.Ic.push({ue:a,action:"om",data:b,G:c})};
h.vd=function(a,b){this.na?Th(this,"oc",a,null,b):this.Ic.push({ue:a,action:"oc",data:null,G:b})};function Th(a,b,c,d,e){c={p:c,d:d};a.f("onDisconnect "+b,c);a.va(b,c,function(a){e&&setTimeout(function(){e(a.s,a.d)},Math.floor(0))})}h.put=function(a,b,c,d){Uh(this,"p",a,b,c,d)};h.bf=function(a,b,c,d){Uh(this,"m",a,b,c,d)};function Uh(a,b,c,d,e,f){d={p:c,d:d};p(f)&&(d.h=f);a.qa.push({action:b,qf:d,G:e});a.Mc++;b=a.qa.length-1;a.na?Vh(a,b):a.f("Buffering put: "+c)}
function Vh(a,b){var c=a.qa[b].action,d=a.qa[b].qf,e=a.qa[b].G;a.qa[b].qg=a.na;a.va(c,d,function(d){a.f(c+" response",d);delete a.qa[b];a.Mc--;0===a.Mc&&(a.qa=[]);e&&e(d.s,d.d)})}h.we=function(a){this.na&&(a={c:a},this.f("reportStats",a),this.va("s",a,function(a){"ok"!==a.s&&this.f("reportStats","Error sending stats: "+a.d)}))};
h.ud=function(a){if("r"in a){this.f("from server: "+z(a));var b=a.r,c=this.Ed[b];c&&(delete this.Ed[b],c(a.b))}else{if("error"in a)throw"A server-side error has occurred: "+a.error;"a"in a&&(b=a.a,a=a.b,this.f("handleServerMessage",b,a),"d"===b?this.Fb(a.p,a.d,!1,a.t):"m"===b?this.Fb(a.p,a.d,!0,a.t):"c"===b?Wh(this,a.p,a.q):"ac"===b?Sh(this,a.s,a.d):"sd"===b?this.xe?this.xe(a):"msg"in a&&"undefined"!==typeof console&&console.log("FIREBASE: "+a.msg.replace("\n","\nFIREBASE: ")):Tc("Unrecognized action received from server: "+
z(b)+"\nAre you using the latest client?"))}};h.Jc=function(a,b){this.f("connection ready");this.na=!0;this.yc=(new Date).getTime();this.se({serverTimeOffset:a-(new Date).getTime()});this.Bb=b;if(this.Se){var c={};c["sdk.js."+firebase.SDK_VERSION.replace(/\./g,"-")]=1;Zg()?c["framework.cordova"]=1:"object"===typeof navigator&&"ReactNative"===navigator.product&&(c["framework.reactnative"]=1);this.we(c)}Xh(this);this.Se=!1;this.Hc(!0)};
function Nh(a,b){I(!a.Ha,"Scheduling a connect when we're already connected/ing?");a.tb&&clearTimeout(a.tb);a.tb=setTimeout(function(){a.tb=null;Yh(a)},Math.floor(b))}h.ig=function(a){a&&!this.Lb&&this.Ua===this.qd&&(this.f("Window became visible.  Reducing delay."),this.Ua=1E3,this.Ha||Nh(this,0));this.Lb=a};h.hg=function(a){a?(this.f("Browser went online."),this.Ua=1E3,this.Ha||Nh(this,0)):(this.f("Browser went offline.  Killing connection."),this.Ha&&this.Ha.close())};
h.hf=function(){this.f("data client disconnected");this.na=!1;this.Ha=null;for(var a=0;a<this.qa.length;a++){var b=this.qa[a];b&&"h"in b.qf&&b.qg&&(b.G&&b.G("disconnect"),delete this.qa[a],this.Mc--)}0===this.Mc&&(this.qa=[]);this.Ed={};Zh(this)&&(this.Lb?this.yc&&(3E4<(new Date).getTime()-this.yc&&(this.Ua=1E3),this.yc=null):(this.f("Window isn't visible.  Delaying reconnect."),this.Ua=this.qd,this.je=(new Date).getTime()),a=Math.max(0,this.Ua-((new Date).getTime()-this.je)),a*=Math.random(),this.f("Trying to reconnect in "+
a+"ms"),Nh(this,a),this.Ua=Math.min(this.qd,1.3*this.Ua));this.Hc(!1)};
function Yh(a){if(Zh(a)){a.f("Making a connection attempt");a.je=(new Date).getTime();a.yc=null;var b=u(a.ud,a),c=u(a.Jc,a),d=u(a.hf,a),e=a.id+":"+Oh++,f=a.Bb,g=!1,k=null,m=function(){k?k.close():(g=!0,d())};a.Ha={close:m,va:function(a){I(k,"sendRequest call when we're not connected not allowed.");k.va(a)}};var l=a.ae;a.ae=!1;a.Rd.getToken(l).then(function(l){g?Nb("getToken() completed but was canceled"):(Nb("getToken() completed. Creating connection."),a.nb=l&&l.accessToken,k=new zh(e,a.M,b,c,d,
function(b){N(b+" ("+a.M.toString()+")");a.bb("server_kill")},f))}).then(null,function(b){a.f("Failed to get token: "+b);g||m()})}}h.bb=function(a){Nb("Interrupting connection for reason: "+a);this.nd[a]=!0;this.Ha?this.Ha.close():(this.tb&&(clearTimeout(this.tb),this.tb=null),this.na&&this.hf())};h.ic=function(a){Nb("Resuming connection for reason: "+a);delete this.nd[a];Da(this.nd)&&(this.Ua=1E3,this.Ha||Nh(this,0))};
function Wh(a,b,c){c=c?Ia(c,function(a){return $c(a)}).join("$"):"default";(a=Qh(a,b,c))&&a.G&&a.G("permission_denied")}function Qh(a,b,c){b=(new J(b)).toString();var d;p(a.aa[b])?(d=a.aa[b][c],delete a.aa[b][c],0===wa(a.aa[b])&&delete a.aa[b]):d=void 0;return d}
function Sh(a,b,c){Nb("Auth token revoked: "+b+"/"+c);a.nb=null;a.ae=!0;a.Ha.close();"invalid_token"===b&&(a.he++,3<=a.he&&(a.Ua=3E4,N("Provided authentication credentials are invalid. This usually indicates your FirebaseApp instance was not initialized correctly. Make sure your apiKey and databaseURL match the values provided for your app at https://console.firebase.google.com/, or if you're using a service account, make sure it's authorized to access the specified databaseURL and is from the correct project.")))}
function Xh(a){Rh(a);v(a.aa,function(b){v(b,function(b){Ph(a,b)})});for(var b=0;b<a.qa.length;b++)a.qa[b]&&Vh(a,b);for(;a.Ic.length;)b=a.Ic.shift(),Th(a,b.action,b.ue,b.data,b.G)}function Zh(a){var b;b=$g.Ub().fc;return Da(a.nd)&&b};var Y={Xf:function(){eh=rh=!0}};Y.forceLongPolling=Y.Xf;Y.Yf=function(){fh=!0};Y.forceWebSockets=Y.Yf;Y.dg=function(){return qh.isAvailable()};Y.isWebSocketsAvailable=Y.dg;Y.wg=function(a,b){a.u.Ta.xe=b};Y.setSecurityDebugCallback=Y.wg;Y.ze=function(a,b){a.u.ze(b)};Y.stats=Y.ze;Y.Ae=function(a,b){a.u.Ae(b)};Y.statsIncrementCounter=Y.Ae;Y.bd=function(a){return a.u.bd};Y.dataUpdateCount=Y.bd;Y.cg=function(a,b){a.u.ge=b};Y.interceptServerData=Y.cg;function ee(a,b,c){this.app=c;var d=new Mb(c);this.M=a;this.Wa=dc(a);this.Sc=null;this.da=new Ef;this.td=1;this.Ta=null;if(b||0<=("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))this.wa=new ld(this.M,u(this.Fb,this),d),setTimeout(u(this.Hc,this,!0),0);else{b=c.options.databaseAuthVariableOverride||null;if(null!==b){if("object"!==ca(b))throw Error("Only objects are supported for option databaseAuthVariableOverride");
try{z(b)}catch(e){throw Error("Invalid authOverride provided: "+e);}}this.wa=this.Ta=new Lh(this.M,u(this.Fb,this),u(this.Hc,this),u(this.se,this),d,b)}var f=this;Ob(d,function(a){f.wa.of(a)});this.zg=ec(a,u(function(){return new ac(this.Wa,this.wa)},this));this.kc=new Oe;this.fe=new Xb;this.md=new Eg({ye:function(a,b,c,d){b=[];c=f.fe.j(a.path);c.e()||(b=Gg(f.md,new Rb(Me,a.path,c)),setTimeout(function(){d("ok")},0));return b},Ld:aa});$h(this,"connected",!1);this.ja=new rc;this.Za=new de(this);this.bd=
0;this.ge=null;this.K=new Eg({ye:function(a,b,c,d){f.wa.af(a,c,b,function(b,c){var e=d(b,c);Jf(f.da,a.path,e)});return[]},Ld:function(a,b){f.wa.Df(a,b)}})}h=ee.prototype;h.toString=function(){return(this.M.Pc?"https://":"http://")+this.M.host};h.name=function(){return this.M.ne};function ai(a){a=a.fe.j(new J(".info/serverTimeOffset")).H()||0;return(new Date).getTime()+a}function bi(a){a=a={timestamp:ai(a)};a.timestamp=a.timestamp||(new Date).getTime();return a}
h.Fb=function(a,b,c,d){this.bd++;var e=new J(a);b=this.ge?this.ge(a,b):b;a=[];d?c?(b=ua(b,function(a){return K(a)}),a=Og(this.K,e,b,d)):(b=K(b),a=Kg(this.K,e,b,d)):c?(d=ua(b,function(a){return K(a)}),a=Jg(this.K,e,d)):(d=K(b),a=Gg(this.K,new Rb(Me,e,d)));d=e;0<a.length&&(d=ci(this,e));Jf(this.da,d,a)};h.Hc=function(a){$h(this,"connected",a);!1===a&&di(this)};h.se=function(a){var b=this;bd(a,function(a,d){$h(b,d,a)})};
function $h(a,b,c){b=new J("/.info/"+b);c=K(c);var d=a.fe;d.Hd=d.Hd.F(b,c);c=Gg(a.md,new Rb(Me,b,c));Jf(a.da,b,c)}h.Ib=function(a,b,c,d){this.f("set",{path:a.toString(),value:b,Jg:c});var e=bi(this);b=K(b,c);var e=uc(b,e),f=this.td++,e=Fg(this.K,a,e,f,!0);Ff(this.da,e);var g=this;this.wa.put(a.toString(),b.H(!0),function(b,c){var e="ok"===b;e||N("set at "+a+" failed: "+b);e=Ig(g.K,f,!e);Jf(g.da,a,e);ei(d,b,c)});e=fi(this,a);ci(this,e);Jf(this.da,e,[])};
h.update=function(a,b,c){this.f("update",{path:a.toString(),value:b});var d=!0,e=bi(this),f={};v(b,function(a,b){d=!1;var c=K(a);f[b]=uc(c,e)});if(d)Nb("update() called with empty data.  Don't do anything."),ei(c,"ok");else{var g=this.td++,k=Hg(this.K,a,f,g);Ff(this.da,k);var m=this;this.wa.bf(a.toString(),b,function(b,d){var e="ok"===b;e||N("update at "+a+" failed: "+b);var e=Ig(m.K,g,!e),f=a;0<e.length&&(f=ci(m,a));Jf(m.da,f,e);ei(c,b,d)});b=fi(this,a);ci(this,b);Jf(this.da,a,[])}};
function di(a){a.f("onDisconnectEvents");var b=bi(a),c=[];sc(qc(a.ja,b),D,function(b,e){c=c.concat(Gg(a.K,new Rb(Me,b,e)));var f=fi(a,b);ci(a,f)});a.ja=new rc;Jf(a.da,D,c)}h.vd=function(a,b){var c=this;this.wa.vd(a.toString(),function(d,e){"ok"===d&&ke(c.ja,a);ei(b,d,e)})};function gf(a,b,c,d){var e=K(c);a.wa.pe(b.toString(),e.H(!0),function(c,g){"ok"===c&&tc(a.ja,b,e);ei(d,c,g)})}function hf(a,b,c,d,e){var f=K(c,d);a.wa.pe(b.toString(),f.H(!0),function(c,d){"ok"===c&&tc(a.ja,b,f);ei(e,c,d)})}
function jf(a,b,c,d){var e=!0,f;for(f in c)e=!1;e?(Nb("onDisconnect().update() called with empty data.  Don't do anything."),ei(d,"ok")):a.wa.ff(b.toString(),c,function(e,f){if("ok"===e)for(var m in c){var l=K(c[m]);tc(a.ja,b.m(m),l)}ei(d,e,f)})}function Uf(a,b,c){c=".info"===O(b.path)?a.md.Mb(b,c):a.K.Mb(b,c);Hf(a.da,b.path,c)}h.bb=function(){this.Ta&&this.Ta.bb("repo_interrupt")};h.ic=function(){this.Ta&&this.Ta.ic("repo_interrupt")};
h.ze=function(a){if("undefined"!==typeof console){a?(this.Sc||(this.Sc=new $b(this.Wa)),a=this.Sc.get()):a=this.Wa.get();var b=Ja(za(a),function(a,b){return Math.max(b.length,a)},0),c;for(c in a){for(var d=a[c],e=c.length;e<b+2;e++)c+=" ";console.log(c+d)}}};h.Ae=function(a){Zb(this.Wa,a);this.zg.yf[a]=!0};h.f=function(a){var b="";this.Ta&&(b=this.Ta.id+":");Nb(b,arguments)};
function ei(a,b,c){a&&ed(function(){if("ok"==b)a(null);else{var d=(b||"error").toUpperCase(),e=d;c&&(e+=": "+c);e=Error(e);e.code=d;a(e)}})};function gi(a,b,c,d,e){function f(){}a.f("transaction on "+b);var g=new R(a,b);g.ec("value",f);c={path:b,update:c,G:d,status:null,kf:Kc(),Ge:e,tf:0,Nd:function(){g.Gc("value",f)},Pd:null,Da:null,Zc:null,$c:null,ad:null};d=a.K.Ba(b,void 0)||H;c.Zc=d;d=c.update(d.H());if(p(d)){Ze("transaction failed: Data returned ",d,c.path);c.status=1;e=Pe(a.kc,b);var k=e.Ea()||[];k.push(c);Qe(e,k);"object"===typeof d&&null!==d&&Ab(d,".priority")?(k=A(d,".priority"),I(Xe(k),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):
k=(a.K.Ba(b)||H).C().H();e=bi(a);d=K(d,k);e=uc(d,e);c.$c=d;c.ad=e;c.Da=a.td++;c=Fg(a.K,b,e,c.Da,c.Ge);Jf(a.da,b,c);hi(a)}else c.Nd(),c.$c=null,c.ad=null,c.G&&(a=new T(c.Zc,new R(a,c.path),L),c.G(null,!1,a))}function hi(a,b){var c=b||a.kc;b||ii(a,c);if(null!==c.Ea()){var d=ji(a,c);I(0<d.length,"Sending zero length transaction queue");Ka(d,function(a){return 1===a.status})&&ki(a,c.path(),d)}else c.gd()&&c.P(function(b){hi(a,b)})}
function ki(a,b,c){for(var d=Ia(c,function(a){return a.Da}),e=a.K.Ba(b,d)||H,d=e,e=e.hash(),f=0;f<c.length;f++){var g=c[f];I(1===g.status,"tryToSendTransactionQueue_: items in queue should all be run.");g.status=2;g.tf++;var k=Q(b,g.path),d=d.F(k,g.$c)}d=d.H(!0);a.wa.put(b.toString(),d,function(d){a.f("transaction put response",{path:b.toString(),status:d});var e=[];if("ok"===d){d=[];for(f=0;f<c.length;f++){c[f].status=3;e=e.concat(Ig(a.K,c[f].Da));if(c[f].G){var g=c[f].ad,k=new R(a,c[f].path);d.push(u(c[f].G,
null,null,!0,new T(g,k,L)))}c[f].Nd()}ii(a,Pe(a.kc,b));hi(a);Jf(a.da,b,e);for(f=0;f<d.length;f++)ed(d[f])}else{if("datastale"===d)for(f=0;f<c.length;f++)c[f].status=4===c[f].status?5:1;else for(N("transaction at "+b.toString()+" failed: "+d),f=0;f<c.length;f++)c[f].status=5,c[f].Pd=d;ci(a,b)}},e)}function ci(a,b){var c=li(a,b),d=c.path(),c=ji(a,c);mi(a,c,d);return d}
function mi(a,b,c){if(0!==b.length){for(var d=[],e=[],f=Ha(b,function(a){return 1===a.status}),f=Ia(f,function(a){return a.Da}),g=0;g<b.length;g++){var k=b[g],m=Q(c,k.path),l=!1,r;I(null!==m,"rerunTransactionsUnderNode_: relativePath should not be null.");if(5===k.status)l=!0,r=k.Pd,e=e.concat(Ig(a.K,k.Da,!0));else if(1===k.status)if(25<=k.tf)l=!0,r="maxretry",e=e.concat(Ig(a.K,k.Da,!0));else{var x=a.K.Ba(k.path,f)||H;k.Zc=x;var G=b[g].update(x.H());p(G)?(Ze("transaction failed: Data returned ",G,
k.path),m=K(G),"object"===typeof G&&null!=G&&Ab(G,".priority")||(m=m.ga(x.C())),x=k.Da,G=bi(a),G=uc(m,G),k.$c=m,k.ad=G,k.Da=a.td++,Na(f,x),e=e.concat(Fg(a.K,k.path,G,k.Da,k.Ge)),e=e.concat(Ig(a.K,x,!0))):(l=!0,r="nodata",e=e.concat(Ig(a.K,k.Da,!0)))}Jf(a.da,c,e);e=[];l&&(b[g].status=3,setTimeout(b[g].Nd,Math.floor(0)),b[g].G&&("nodata"===r?(k=new R(a,b[g].path),d.push(u(b[g].G,null,null,!1,new T(b[g].Zc,k,L)))):d.push(u(b[g].G,null,Error(r),!1,null))))}ii(a,a.kc);for(g=0;g<d.length;g++)ed(d[g]);hi(a)}}
function li(a,b){for(var c,d=a.kc;null!==(c=O(b))&&null===d.Ea();)d=Pe(d,c),b=E(b);return d}function ji(a,b){var c=[];ni(a,b,c);c.sort(function(a,b){return a.kf-b.kf});return c}function ni(a,b,c){var d=b.Ea();if(null!==d)for(var e=0;e<d.length;e++)c.push(d[e]);b.P(function(b){ni(a,b,c)})}function ii(a,b){var c=b.Ea();if(c){for(var d=0,e=0;e<c.length;e++)3!==c[e].status&&(c[d]=c[e],d++);c.length=d;Qe(b,0<c.length?c:null)}b.P(function(b){ii(a,b)})}
function fi(a,b){var c=li(a,b).path(),d=Pe(a.kc,b);Te(d,function(b){oi(a,b)});oi(a,d);Se(d,function(b){oi(a,b)});return c}
function oi(a,b){var c=b.Ea();if(null!==c){for(var d=[],e=[],f=-1,g=0;g<c.length;g++)4!==c[g].status&&(2===c[g].status?(I(f===g-1,"All SENT items should be at beginning of queue."),f=g,c[g].status=4,c[g].Pd="set"):(I(1===c[g].status,"Unexpected transaction status in abort"),c[g].Nd(),e=e.concat(Ig(a.K,c[g].Da,!0)),c[g].G&&d.push(u(c[g].G,null,Error("set"),!1,null))));-1===f?Qe(b,null):c.length=f+1;Jf(a.da,b.path(),e);for(g=0;g<d.length;g++)ed(d[g])}};function je(){this.lb={};this.Ef=!1}je.prototype.bb=function(){for(var a in this.lb)this.lb[a].bb()};je.prototype.ic=function(){for(var a in this.lb)this.lb[a].ic()};je.prototype.$d=function(a){this.Ef=a};ba(je);je.prototype.interrupt=je.prototype.bb;je.prototype.resume=je.prototype.ic;var Z={};Z.mc=Lh;Z.DataConnection=Z.mc;Lh.prototype.yg=function(a,b){this.va("q",{p:a},b)};Z.mc.prototype.simpleListen=Z.mc.prototype.yg;Lh.prototype.Qf=function(a,b){this.va("echo",{d:a},b)};Z.mc.prototype.echo=Z.mc.prototype.Qf;Lh.prototype.interrupt=Lh.prototype.bb;Z.Hf=zh;Z.RealTimeConnection=Z.Hf;zh.prototype.sendRequest=zh.prototype.va;zh.prototype.close=zh.prototype.close;
Z.bg=function(a){var b=Lh.prototype.put;Lh.prototype.put=function(c,d,e,f){p(f)&&(f=a());b.call(this,c,d,e,f)};return function(){Lh.prototype.put=b}};Z.hijackHash=Z.bg;Z.Gf=kc;Z.ConnectionTarget=Z.Gf;Z.ka=function(a){return a.ka()};Z.queryIdentifier=Z.ka;Z.eg=function(a){return a.u.Ta.aa};Z.listens=Z.eg;Z.$d=function(a){je.Ub().$d(a)};Z.forceRestClient=Z.$d;Z.Context=je;function R(a,b){if(!(a instanceof ee))throw Error("new Firebase() no longer supported - use app.database().");W.call(this,a,b,cg,!1);this.then=void 0;this["catch"]=void 0}ja(R,W);h=R.prototype;h.getKey=function(){B("Firebase.key",0,0,arguments.length);return this.path.e()?null:$d(this.path)};
h.m=function(a){B("Firebase.child",1,1,arguments.length);if(fa(a))a=String(a);else if(!(a instanceof J))if(null===O(this.path)){var b=a;b&&(b=b.replace(/^\/*\.info(\/|$)/,"/"));ef("Firebase.child",b)}else ef("Firebase.child",a);return new R(this.u,this.path.m(a))};h.getParent=function(){B("Firebase.parent",0,0,arguments.length);var a=this.path.parent();return null===a?null:new R(this.u,a)};
h.Zf=function(){B("Firebase.ref",0,0,arguments.length);for(var a=this;null!==a.getParent();)a=a.getParent();return a};h.Pf=function(){return this.u.Za};h.set=function(a,b){B("Firebase.set",1,2,arguments.length);ff("Firebase.set",this.path);Ye("Firebase.set",a,this.path,!1);C("Firebase.set",2,b,!0);var c=new Db;this.u.Ib(this.path,a,null,Eb(c,b));return c.sa};
h.update=function(a,b){B("Firebase.update",1,2,arguments.length);ff("Firebase.update",this.path);if(da(a)){for(var c={},d=0;d<a.length;++d)c[""+d]=a[d];a=c;N("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}af("Firebase.update",a,this.path);C("Firebase.update",2,b,!0);c=new Db;this.u.update(this.path,a,Eb(c,b));return c.sa};
h.Ib=function(a,b,c){B("Firebase.setWithPriority",2,3,arguments.length);ff("Firebase.setWithPriority",this.path);Ye("Firebase.setWithPriority",a,this.path,!1);bf("Firebase.setWithPriority",2,b);C("Firebase.setWithPriority",3,c,!0);if(".length"===this.getKey()||".keys"===this.getKey())throw"Firebase.setWithPriority failed: "+this.getKey()+" is a read-only object.";var d=new Db;this.u.Ib(this.path,a,b,Eb(d,c));return d.sa};
h.remove=function(a){B("Firebase.remove",0,1,arguments.length);ff("Firebase.remove",this.path);C("Firebase.remove",1,a,!0);return this.set(null,a)};
h.transaction=function(a,b,c){B("Firebase.transaction",1,3,arguments.length);ff("Firebase.transaction",this.path);C("Firebase.transaction",1,a,!1);C("Firebase.transaction",2,b,!0);if(p(c)&&"boolean"!=typeof c)throw Error(Jb("Firebase.transaction",3,!0)+"must be a boolean.");if(".length"===this.getKey()||".keys"===this.getKey())throw"Firebase.transaction failed: "+this.getKey()+" is a read-only object.";"undefined"===typeof c&&(c=!0);var d=new Db;t(b)&&Fb(d.sa);gi(this.u,this.path,a,function(a,c,g){a?
d.reject(a):d.resolve(new Lb(c,g));t(b)&&b(a,c,g)},c);return d.sa};h.vg=function(a,b){B("Firebase.setPriority",1,2,arguments.length);ff("Firebase.setPriority",this.path);bf("Firebase.setPriority",1,a);C("Firebase.setPriority",2,b,!0);var c=new Db;this.u.Ib(this.path.m(".priority"),a,null,Eb(c,b));return c.sa};
h.push=function(a,b){B("Firebase.push",0,2,arguments.length);ff("Firebase.push",this.path);Ye("Firebase.push",a,this.path,!0);C("Firebase.push",2,b,!0);var c=ai(this.u),d=Yd(c),c=this.m(d);if(null!=a){var e=this,f=c.set(a,b).then(function(){return e.m(d)});c.then=u(f.then,f);c["catch"]=u(f.then,f,void 0);t(b)&&Fb(f)}return c};h.ib=function(){ff("Firebase.onDisconnect",this.path);return new U(this.u,this.path)};R.prototype.child=R.prototype.m;R.prototype.set=R.prototype.set;R.prototype.update=R.prototype.update;
R.prototype.setWithPriority=R.prototype.Ib;R.prototype.remove=R.prototype.remove;R.prototype.transaction=R.prototype.transaction;R.prototype.setPriority=R.prototype.vg;R.prototype.push=R.prototype.push;R.prototype.onDisconnect=R.prototype.ib;fd(R.prototype,"database",R.prototype.Pf);fd(R.prototype,"key",R.prototype.getKey);fd(R.prototype,"parent",R.prototype.getParent);fd(R.prototype,"root",R.prototype.Zf);if("undefined"===typeof firebase)throw Error("Cannot install Firebase Database - be sure to load firebase-app.js first.");
try{var pi=firebase.INTERNAL.registerService("database",function(a){var b=je.Ub(),c=a.options.databaseURL;p(c)||Uc("Can't determine Firebase Database URL.  Be sure to include databaseURL option when calling firebase.intializeApp().");var d=Vc(c),c=d.hc;ie("Invalid Firebase Database URL",d);d.path.e()||Uc("Database URL must point to the root of a Firebase Database (not including a child path).");(d=A(b.lb,a.name))&&Uc("FIREBASE INTERNAL ERROR: Database initialized multiple times.");d=new ee(c,b.Ef,
a);b.lb[a.name]=d;return d.Za},{Reference:R,Query:W,Database:de,enableLogging:Rc,INTERNAL:Y,TEST_ACCESS:Z,ServerValue:ge});module.exports=pi}catch(qi){Uc("Failed to register the Firebase Database Service ("+qi+")")};
})();

